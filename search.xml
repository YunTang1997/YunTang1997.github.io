<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mysql排序查询</title>
      <link href="/2020/06/21/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5(%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2)/"/>
      <url>/2020/06/21/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5(%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2)/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#排序查询语法">排序查询语法</a></li><li><a href="#按表达式排序">按表达式排序</a></li><li><a href="#按别名排序">按别名排序</a></li><li><a href="#按函数排序">按函数排序</a></li><li><a href="#升降混合排序">升降混合排序</a></li><li><a href="#练习">练习</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="排序查询语法"><a href="#排序查询语法" class="headerlink" title="排序查询语法"></a>排序查询语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">SELECT </span><br><span class="line">    查询列表</span><br><span class="line">FROM</span><br><span class="line">    表</span><br><span class="line">（WHERE</span><br><span class="line">    筛选条件）</span><br><span class="line">ORDER BY 排序列表 ASC（升序，可省略） | DESC（降序）</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、ASC表示升序，DESC表示降序，不写默认表示升序</span><br><span class="line"><span class="number">2</span>、ORDER BY子句中可以支持单个字段、多个字段、表达式、函数、别名</span><br><span class="line"><span class="number">3</span>、ORDER BY子句一般是放在查询语句的最后面，但是LIMIT子句除外</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 案例一</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY salary DESC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY salary ASC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 案例二</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    department_id &gt;= <span class="number">90</span></span><br><span class="line">ORDER BY hiredate ASC;</span><br></pre></td></tr></table></figure><hr><h2 id="按表达式排序"><a href="#按表达式排序" class="headerlink" title="按表达式排序"></a>按表达式排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    *, salary * <span class="number">12</span> * (<span class="number">1</span> + ifnull(commission_pct, <span class="number">0</span>)) AS <span class="string">'年薪'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY salary * <span class="number">12</span> * (<span class="number">1</span> + ifnull(commission_pct, <span class="number">0</span>)) DESC;</span><br></pre></td></tr></table></figure><hr><h2 id="按别名排序"><a href="#按别名排序" class="headerlink" title="按别名排序"></a>按别名排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    *, salary * <span class="number">12</span> * (<span class="number">1</span> + ifnull(commission_pct, <span class="number">0</span>)) AS <span class="string">'年薪'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY <span class="string">'年薪'</span> DESC;</span><br></pre></td></tr></table></figure><hr><h2 id="按函数排序"><a href="#按函数排序" class="headerlink" title="按函数排序"></a>按函数排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name, LENGTH(last_name) AS <span class="string">'字节长度'</span>, salary</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY LENGTH(last_name) ASC;</span><br></pre></td></tr></table></figure><hr><h2 id="升降混合排序"><a href="#升降混合排序" class="headerlink" title="升降混合排序"></a>升降混合排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 案例：查询员工信息，要求先按工资排序（升序），再按员工编号排序（降序）</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY salary ASC , employee_id DESC;</span><br></pre></td></tr></table></figure><hr><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name,</span><br><span class="line">    department_id,</span><br><span class="line">    salary * <span class="number">12</span> * (<span class="number">1</span> + IFNULL(commission_pct, <span class="number">0</span>)) AS <span class="string">'年薪'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY <span class="string">'年薪'</span> DESC , last_name ASC;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    last_name, salary</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    NOT (salary BETWEEN <span class="number">8000</span> AND <span class="number">17000</span>)</span><br><span class="line">ORDER BY salary DESC;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    *, LENGTH(email)</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    email LIKE <span class="string">'%e%'</span></span><br><span class="line">ORDER BY LENGTH(email) DESC , department_id ASC;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql条件查询</title>
      <link href="/2020/06/21/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2)/"/>
      <url>/2020/06/21/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2)/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#条件查询语法">条件查询语法</a></li><li><a href="#按条件表达式筛选">按条件表达式筛选</a></li><li><a href="#按逻辑表示筛选">按逻辑表示筛选</a></li><li><a href="#模糊查询">模糊查询</a></li><li><a href="#like">like</a></li><li><a href="#between-and">between and</a></li><li><a href="#in">in</a></li><li><a href="#is-nullis-not-null">is null、is not null</a></li><li><a href="#安全等于判断是否等于null或者数值如果等于返回true但可读性很差">安全等于（&lt;=&gt;），判断是否等于null或者数值，如果等于返回true，但可读性很差</a></li><li><a href="#练习">练习</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="条件查询语法"><a href="#条件查询语法" class="headerlink" title="条件查询语法"></a>条件查询语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">SELECT </span><br><span class="line">    查询列表</span><br><span class="line">FROM</span><br><span class="line">    表名</span><br><span class="line">WHERE</span><br><span class="line">    筛选条件;</span><br><span class="line">    </span><br><span class="line">分类：</span><br><span class="line"><span class="number">1</span>、按条件表达式筛选：条件运算符：&gt; &lt; = （!= &lt;&gt;） &gt;= &lt;=</span><br><span class="line"><span class="number">2</span>、按逻辑表达式筛选：逻辑运算符：&amp;&amp; || ！<span class="keyword">and</span> <span class="keyword">or</span> <span class="keyword">not</span></span><br><span class="line"><span class="number">3</span>、模糊查询：ilke between <span class="keyword">and</span> <span class="keyword">in</span> <span class="keyword">is</span> null</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><hr><h2 id="按条件表达式筛选"><a href="#按条件表达式筛选" class="headerlink" title="按条件表达式筛选"></a>按条件表达式筛选</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">1</span>：查询工资&gt;<span class="number">12000</span>的员工信息</span><br><span class="line">SELECT </span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    salary &gt; <span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line">-- 案例<span class="number">2</span>：查询部门编号不等于<span class="number">90</span>号的员工名和部门编号</span><br><span class="line">SELECT </span><br><span class="line">    employee_id, department_id</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    department_id != <span class="number">90</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="按逻辑表示筛选"><a href="#按逻辑表示筛选" class="headerlink" title="按逻辑表示筛选"></a>按逻辑表示筛选</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">1</span>：查询部门编号不是在<span class="number">90</span>到<span class="number">110</span>之间，或者工资高于<span class="number">15000</span>的员工信息</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    NOT (<span class="number">90</span> &lt;= department_id</span><br><span class="line">        AND department_id &lt;= <span class="number">110</span>)</span><br><span class="line">        OR salary &gt; <span class="number">15000</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">like</span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、一般和通配符搭配使用。</span><br><span class="line">通配符：</span><br><span class="line">% 任意多个字符，包含<span class="number">0</span>个字符</span><br><span class="line">        _ 任意单个字符</span><br><span class="line"></span><br><span class="line">between <span class="keyword">and</span></span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、提升代码简洁度</span><br><span class="line"><span class="number">2</span>、包含临界值</span><br><span class="line"><span class="number">3</span>、临界值不要调换顺序</span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> </span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、提升语句简洁度</span><br><span class="line"><span class="number">2</span>、<span class="keyword">in</span>列表的值类型必须一致或兼容</span><br><span class="line"><span class="number">3</span>、不能使用通用符</span><br><span class="line"></span><br><span class="line"><span class="keyword">is</span> null、<span class="keyword">is</span> <span class="keyword">not</span> null</span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、=或者&lt;&gt;不能用于判断null值</span><br><span class="line"><span class="number">2</span>、<span class="keyword">is</span> null或者<span class="keyword">is</span> <span class="keyword">not</span> null 可以判断null值</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><hr><h2 id="like"><a href="#like" class="headerlink" title="like"></a>like</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">1</span>：查询员工名中包含字符a的员工信息</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'%a%'</span>;</span><br><span class="line">    </span><br><span class="line">-- 案例<span class="number">2</span>：查询员工名中第三个字符为e，第五个字符为a的员工名和工资</span><br><span class="line">SELECT </span><br><span class="line">    last_name, salary</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'__e_a%'</span>;</span><br><span class="line"></span><br><span class="line">-- 案例<span class="number">3</span>：查询员工名中第二个字符串为_的员工名</span><br><span class="line">-- 方法一</span><br><span class="line">SELECT </span><br><span class="line">    last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'_\_%'</span>;</span><br><span class="line"></span><br><span class="line">-- 方法二</span><br><span class="line">-- escape关键词表示后面的符号为转义符</span><br><span class="line">SELECT </span><br><span class="line">    last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'_$_%'</span> ESCAPE <span class="string">'$'</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="between-and"><a href="#between-and" class="headerlink" title="between and"></a>between and</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">3</span>：查询员工编号在<span class="number">100</span>到<span class="number">120</span>之间的员工信息</span><br><span class="line">-- 方法一</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    employee_id &gt;= <span class="number">100</span></span><br><span class="line">        AND employee_id &lt;= <span class="number">120</span>;</span><br><span class="line"></span><br><span class="line">-- 方法二</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    employee_id BETWEEN <span class="number">100</span> AND <span class="number">120</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="in"><a href="#in" class="headerlink" title="in"></a>in</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">4</span>：查询员工的工种编号是IT_PROG、AD_VP、AD_PRES中的一个的员工名和工种编号</span><br><span class="line">-- 方法一</span><br><span class="line">SELECT </span><br><span class="line">    last_name, job_id</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    job_id = <span class="string">'IT_PROG'</span> OR job_id = <span class="string">'AD_VP'</span></span><br><span class="line">        OR job_id = <span class="string">'AD_PRES'</span>;</span><br><span class="line"></span><br><span class="line">-- 方法二</span><br><span class="line">SELECT </span><br><span class="line">    last_name, job_id</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    job_id IN (<span class="string">'IT_PROG'</span> , <span class="string">'AD_VP'</span>, <span class="string">'AD_PRES'</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="is-null、is-not-null"><a href="#is-null、is-not-null" class="headerlink" title="is null、is not null"></a>is null、is not null</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">1</span>：查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">    last_name, commission_pct</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    commission_pct IS NULL;</span><br><span class="line">    </span><br><span class="line">-- 案例<span class="number">2</span>：查询有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">    last_name, commission_pct</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    commission_pct IS NOT NULL;</span><br></pre></td></tr></table></figure><hr><h2 id="安全等于（-lt-gt-），判断是否等于null或者数值，如果等于返回true，但可读性很差"><a href="#安全等于（-lt-gt-），判断是否等于null或者数值，如果等于返回true，但可读性很差" class="headerlink" title="安全等于（&lt;=&gt;），判断是否等于null或者数值，如果等于返回true，但可读性很差"></a>安全等于（&lt;=&gt;），判断是否等于null或者数值，如果等于返回true，但可读性很差</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name, commission_pct</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    commission_pct &lt;=&gt; NULL;</span><br><span class="line">```    </span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="comment">## 练习</span></span><br><span class="line">```python</span><br><span class="line">-- 查询员工为<span class="number">176</span>号的员工的姓名、部门号和年薪</span><br><span class="line">SELECT </span><br><span class="line">    last_name,</span><br><span class="line">    department_id,</span><br><span class="line">    salary * <span class="number">12</span> * (<span class="number">1</span> + IFNULL(commission_pct, <span class="number">0</span>)) AS 年薪</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    employee_id = <span class="number">176</span>;</span><br><span class="line">    </span><br><span class="line">-- 选择工资不在<span class="number">5000</span>到<span class="number">12000</span>的员工的姓名和工资 </span><br><span class="line">SELECT </span><br><span class="line">    last_name, salary</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    NOT (salary BETWEEN <span class="number">5000</span> AND <span class="number">12000</span>);</span><br><span class="line">    </span><br><span class="line">-- 选择姓名中有字母a和e的员工姓名 </span><br><span class="line">SELECT </span><br><span class="line">    last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'%a%e%'</span>;</span><br><span class="line">    </span><br><span class="line">-- 显示出表employees的manager_id是<span class="number">100</span>,<span class="number">101</span>,<span class="number">110</span> 的员工姓名、职位 </span><br><span class="line">SELECT </span><br><span class="line">    last_name, job_id</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    manager_id IN (<span class="number">100</span> , <span class="number">101</span>, <span class="number">110</span>);</span><br><span class="line"></span><br><span class="line">-- 查询没有奖金，且工资小于<span class="number">18000</span>的salary，last_name</span><br><span class="line">SELECT </span><br><span class="line">    salary, last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    salary &lt; <span class="number">18000</span></span><br><span class="line">        AND commission_pct IS NULL;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    job_id != <span class="string">'IT'</span> OR salary = <span class="number">12000</span>;</span><br><span class="line">    </span><br><span class="line">desc departments;</span><br><span class="line"></span><br><span class="line">SELECT DISTINCT</span><br><span class="line">    location_id</span><br><span class="line">FROM</span><br><span class="line">    departments;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql基础查询</title>
      <link href="/2020/06/21/Mysq%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2)/"/>
      <url>/2020/06/21/Mysq%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2)/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#基础查询语法">基础查询语法</a></li><li><a href="#使用指定的数据库">使用指定的数据库</a></li><li><a href="#查询表中的单个多个字段">查询表中的单个、多个字段</a></li><li><a href="#查询常量值">查询常量值</a></li><li><a href="#查询表达式">查询表达式</a></li><li><a href="#查询函数">查询函数</a></li><li><a href="#给字段取别名">给字段取别名</a></li><li><a href="#去重distinct">去重（distinct）</a></li><li><a href="#号的作用">+号的作用</a></li><li><a href="#连接多个字段concat">连接多个字段（concat）</a></li><li><a href="#练习">练习</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="基础查询语法"><a href="#基础查询语法" class="headerlink" title="基础查询语法"></a>基础查询语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">SELECT </span><br><span class="line">    查询列表</span><br><span class="line">FROM</span><br><span class="line">    表名;</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、查询列表可以是：表中的字段、常量值、表达式、函数</span><br><span class="line"><span class="number">2</span>、查询的结果是一个虚拟的表格（类似于python中的视图）</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><hr><h2 id="使用指定的数据库"><a href="#使用指定的数据库" class="headerlink" title="使用指定的数据库"></a>使用指定的数据库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br></pre></td></tr></table></figure><hr><h2 id="查询表中的单个、多个字段"><a href="#查询表中的单个、多个字段" class="headerlink" title="查询表中的单个、多个字段"></a>查询表中的单个、多个字段</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- <span class="number">2.</span>查询表中的多个字段</span><br><span class="line">SELECT </span><br><span class="line">    last_name, salary, email</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- <span class="number">3.</span>查询表中所有字段</span><br><span class="line">-- 方法一：可以更改查询表的顺序</span><br><span class="line">SELECT </span><br><span class="line">    employee_id,</span><br><span class="line">    first_name,</span><br><span class="line">    last_name,</span><br><span class="line">    email,</span><br><span class="line">    phone_number,</span><br><span class="line">    job_id,</span><br><span class="line">    salary,</span><br><span class="line">    commission_pct,</span><br><span class="line">    manager_id,</span><br><span class="line">    department_id,</span><br><span class="line">    hiredate</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line">    </span><br><span class="line">-- 方法二：不可以更改查询表的顺序</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="查询常量值"><a href="#查询常量值" class="headerlink" title="查询常量值"></a>查询常量值</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="number">100</span>;</span><br><span class="line">SELECT <span class="string">'john'</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="查询表达式"><a href="#查询表达式" class="headerlink" title="查询表达式"></a>查询表达式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="number">100</span> % <span class="number">98</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="查询函数"><a href="#查询函数" class="headerlink" title="查询函数"></a>查询函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT version();</span><br></pre></td></tr></table></figure><hr><h2 id="给字段取别名"><a href="#给字段取别名" class="headerlink" title="给字段取别名"></a>给字段取别名</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"><span class="number">1</span>、便于理解</span><br><span class="line"><span class="number">2</span>、如果要查询的字段有重名的情况，使用别名可以区分开来</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 方式一：使用As </span><br><span class="line">SELECT <span class="number">100</span> % <span class="number">98</span> AS 结果;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    last_name AS 姓, first_name AS 名</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- 方式二：使用空格</span><br><span class="line">SELECT </span><br><span class="line">    last_name 姓, first_name 名</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- 案例：查询salary，显示列名的别名为out put（当别名中有空格等特殊字符，则别名需要用引号，否则会报错）</span><br><span class="line">SELECT </span><br><span class="line">    salary AS <span class="string">"out put"</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="去重（distinct）"><a href="#去重（distinct）" class="headerlink" title="去重（distinct）"></a>去重（distinct）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 案例：查询员工表中涉及到的所有的部门编号</span><br><span class="line">SELECT DISTINCT</span><br><span class="line">    department_id</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="号的作用"><a href="#号的作用" class="headerlink" title="+号的作用"></a>+号的作用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">python中+号：</span><br><span class="line"><span class="number">1</span>、运算符，两个操作数都为数值型</span><br><span class="line"><span class="number">2</span>、连接符，只要有一个操作数为字符串</span><br><span class="line"></span><br><span class="line">mysql中的+号：</span><br><span class="line">仅仅只有一个功能：运算符</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 两个操作数都为数值型，则做加法运算</span><br><span class="line">SELECT <span class="number">100</span> + <span class="number">90</span>; </span><br><span class="line"></span><br><span class="line">-- 其中一方为字符型，试图将字符型转换成数值型，如果转换成功，则继续做加法运算</span><br><span class="line">SELECT <span class="string">"123"</span> + <span class="number">90</span>; </span><br><span class="line"></span><br><span class="line">-- 如果转换失败，则将字符串转换为<span class="number">0</span></span><br><span class="line">SELECT <span class="string">"john"</span> + <span class="number">90</span>; </span><br><span class="line"></span><br><span class="line">-- 只要一方为null，结果肯定为null </span><br><span class="line">SELECT null + <span class="number">10</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="连接多个字段（concat）"><a href="#连接多个字段（concat）" class="headerlink" title="连接多个字段（concat）"></a>连接多个字段（concat）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- 案例：查询员工名和姓连接成一个字段，并显示为 姓名</span><br><span class="line">SELECT </span><br><span class="line">    CONCAT(last_name, first_name) AS 姓名</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- 如果连接的字段中有值为null（ifnull）</span><br><span class="line">SELECT </span><br><span class="line">    IFNULL(commission_pct, <span class="number">0</span>) AS 奖金率, </span><br><span class="line">    commission_pct</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name, job_id, salary AS sal</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line">    </span><br><span class="line">SELECT </span><br><span class="line">    employee_id, last_name, salary * <span class="number">12</span> AS <span class="string">'ANNUAL SALARY'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line">    </span><br><span class="line">DESC departments;</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    departments;</span><br><span class="line">    </span><br><span class="line">SELECT DISTINCT</span><br><span class="line">    job_id</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    CONCAT(employee_id,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            first_name,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            last_name,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            email,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            phone_number,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            IFNULL(commission_pct, <span class="number">0</span>)) AS OUT_PUT</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDFS高可用(HA)理论概述</title>
      <link href="/2020/06/19/HDFS%E9%AB%98%E5%8F%AF%E7%94%A8%E7%90%86%E8%AE%BA%E6%A6%82%E8%BF%B0/"/>
      <url>/2020/06/19/HDFS%E9%AB%98%E5%8F%AF%E7%94%A8%E7%90%86%E8%AE%BA%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#ha概述">HA概述</a></li><li><a href="#hdfs-ha的工作机制">HDFS HA的工作机制</a></li><li><a href="#hdfs-ha的工作要点">HDFS HA的工作要点</a></li><li><a href="#hdfs-ha自动故障转移工作机制">HDFS-HA自动故障转移工作机制</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="HA概述"><a href="#HA概述" class="headerlink" title="HA概述"></a>HA概述</h2><ul><li>所谓HA（High Available），即高可用（7*24小时不中断服务）。</li><li>实现高可用最关键的策略是<font color="red">消除单点故障</font>。HA严格来说应该分成各个组件的HA机制：HDFS的HA和YARN的HA。</li><li>在老版本Hadoop2.0之前，在HDFS集群中<code>NameNode存在单点故障（SPOF）</code>。</li><li>NameNode主要在以下两个方面影响HDFS集群：<ol><li><em>NameNode机器发生意外，如宕机，集群将无法使用，直到管理员重启。</em></li><li><em>NameNode机器需要升级，包括软件、硬件升级，此时集群也将无法使用。</em></li></ol></li><li>HDFS HA功能通过配置<code>Active/Standby</code>两个NameNodes实现在集群中对NameNode的<code>热备</code>来解决上述问题。如果出现故障，如机器崩溃或机器需要升级维护，这时可通过此种方式将NameNode很快的切换到另外一台机器。</li></ul><hr><h2 id="HDFS-HA的工作机制"><a href="#HDFS-HA的工作机制" class="headerlink" title="HDFS HA的工作机制"></a>HDFS HA的工作机制</h2><p>&#8195;&#8195;通过双NameNode消除单点故障。</p><hr><h2 id="HDFS-HA的工作要点"><a href="#HDFS-HA的工作要点" class="headerlink" title="HDFS HA的工作要点"></a>HDFS HA的工作要点</h2><blockquote><p><strong>元数据管理方式需要改变：</strong><br>内存中各自保存一份元数据；Edits日志只有<code>active状态</code>的NameNode节点可以做<code>写</code>操作；两个NameNode都可以读取Edits；共享的Edits放在一个共享存储中管理（qjournal和NFS两个主流实现）。</p><p><strong>需要一个状态管理功能模块：</strong><br><font color="red">实现了一个zkfailover，常驻在每一个namenode所在的节点，每一个zkfailover负责监控自己所在NameNode节点，利用zk进行状态标识，当需要进行状态切换时，由zkfailover来负责切换，切换时需要防止brain split现象的发生。</font></p><p><strong>必须保证两个NameNode之间能够ssh无密码登录。</strong></p><p><strong>隔离（Fence），即同一时刻仅仅有一个NameNode对外提供服务。</strong></p></blockquote><hr><h2 id="HDFS-HA自动故障转移工作机制"><a href="#HDFS-HA自动故障转移工作机制" class="headerlink" title="HDFS-HA自动故障转移工作机制"></a>HDFS-HA自动故障转移工作机制</h2><p>&#8195;&#8195;自动故障转移为HDFS部署增加了两个新组件：<code>ZooKeeper</code>和<code>ZKFailoverController（ZKFC）</code>进程。<br>&#8195;&#8195;<font color="red">ZooKeeper是维护少量协调数据，通知客户端这些数据的改变和监视客户端故障的高可用服务。</font> HA的自动故障转移依赖于ZooKeeper的以下功能：  </p><ol><li><strong>故障检测：</strong> 集群中的每个NameNode在ZooKeeper中维护了一个持久会话，如果机器崩溃，ZooKeeper中的会话将终止，ZooKeeper通知另一个NameNode需要触发故障转移。  </li><li><strong>现役NameNode选择：</strong> ZooKeeper提供了一个简单的机制用于唯一的选择一个节点为active状态。如果目前现役NameNode崩溃，另一个节点可能从ZooKeeper获得特殊的<code>排外锁以表明它应该成为现役NameNode。</code><br></li></ol><p>&#8195;&#8195;ZKFC是自动故障转移中的另一个新组件，是ZooKeeper的客户端，也监视和管理NameNode的状态。每个运行NameNode的主机也运行了一个ZKFC进程，ZKFC负责：</p><ol><li><strong>健康监测：</strong> ZKFC使用一个健康检查命令定期地ping与之在相同主机的NameNode，只要该NameNode及时地回复健康状态，ZKFC认为该节点是健康的。如果该节点崩溃，冻结或进入不健康状态，健康监测器标识该节点为非健康的。<br></li><li><strong>ZooKeeper会话管理：</strong> 当本地NameNode是健康的，ZKFC保持一个在ZooKeeper中打开的会话。如果本地NameNode处于active状态，ZKFC也保持一个<code>特殊的znode锁</code>，该锁使用了ZooKeeper对短暂节点的支持，如果会话终止，锁节点将自动删除。<br></li><li><strong>基于ZooKeeper的选择：</strong> 如果本地NameNode是健康的，且ZKFC发现没有其它的节点当前持有znode锁，它将为自己获取该锁。如果成功，则它已经赢得了选择，并负责运行故障转移进程以使它的本地NameNode为Active。故障转移进程与前面描述的手动故障转移相似，首先如果必要保护之前的现役NameNode，然后本地NameNode转换为Active状态。<br><br>&#8195;&#8195;HDFS-HA故障转移机制如下图所示：<img src="/2020/06/19/HDFS%E9%AB%98%E5%8F%AF%E7%94%A8%E7%90%86%E8%AE%BA%E6%A6%82%E8%BF%B0/HDFS-HA%E6%95%85%E9%9A%9C%E8%BD%AC%E7%A7%BB%E6%9C%BA%E5%88%B6.png" alt="HDFS-HA故障转移机制"></li></ol><blockquote><p>说明：上述内容是我学习b站<a href="https://space.bilibili.com/302417610?spm_id_from=333.788.b_765f7570696e666f.2" target="_blank" rel="noopener">尚硅谷官方</a>分享的公开课<a href="https://www.bilibili.com/video/BV1cW411r7c5" target="_blank" rel="noopener">尚硅谷Hadoop教程(hadoop框架精讲)</a>总结得出。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Xshell命令大全</title>
      <link href="/2020/03/27/Xsell%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"/>
      <url>/2020/03/27/Xsell%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#xshell命令大全">Xshell命令大全</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="Xshell命令大全"><a href="#Xshell命令大全" class="headerlink" title="Xshell命令大全"></a>Xshell命令大全</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">***********************************常用操作*********************************</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文本复制:Ctrl+Insert</span><br><span class="line">//文本粘贴:Shift+Insert</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件复制：</span><br><span class="line">cp file1 file1.bak --把文件file1复制为新文件file1.bak</span><br><span class="line">cp file1 /home/bin --把file1文件从当前位置复制到/home/bin目录下</span><br><span class="line">cp *   /home/bin   --把当前文件下所有文件复制一份到/home/bin目录下</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件移动</span><br><span class="line">mv * /home/bin   --把当前目录下的所有文件移动到/home/bin目录下</span><br><span class="line">mv file1 /home/bin --把file1文件从当前位置下移动到/home/bin目录下 </span><br><span class="line"> </span><br><span class="line">//文件重命名</span><br><span class="line">mv file1 file2  --把file1名称改为file2</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件列表</span><br><span class="line">ls          --列出当前目录下所有文件名</span><br><span class="line">ls -l       --列出当前目录下所有文件的一个长列表</span><br><span class="line">ls -la      --列出当前目录下所有文件的一个长列表，包括以句点开头的隐藏文件</span><br><span class="line">ls a*       --列出当前目录下以字母a开头的所有文件</span><br><span class="line">ls -l *.doc --列出当前目录下以.doc结尾的所有文件</span><br><span class="line"> </span><br><span class="line">find -name *.rpm 在当前目录中查找rpm包</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件删除：</span><br><span class="line">rm file1,file2,...    --删除当前目录文件file1,file2等</span><br><span class="line">rm *   --删除当前目录下所有非隐藏文件，不删除目录，除非指定了-r（递归参数）</span><br><span class="line">rm -rf /home 删除home目录及它所包含的所有内容</span><br><span class="line">rm -r /home 删除home目录，会让你确认是否删除目录下的文件</span><br><span class="line">rm -i a* </span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件上传：rz 回车</span><br><span class="line">//文件下载：sz file1</span><br><span class="line">//提示：如果连接linux虚拟机上，rz命令不起作用，需要安装一个rz和sz的程序：yum install -y lrzsz</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//进入文件</span><br><span class="line">cd ../  或者  cd /      --进入根目录下</span><br><span class="line">cd ..                   --当前目录的上一级目录</span><br><span class="line">cd ../..                --切换到上两级目录</span><br><span class="line">cd ~                    --切换用户目录，如果是root用户，则切换到/root下</span><br><span class="line">cd /home/bin            --进入当前目录的/home/bin目录下</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//建立目录</span><br><span class="line">mkdir <span class="number">001</span>  --在当前目录下建立<span class="number">001</span>目录</span><br><span class="line">mkdir -p /<span class="number">001</span>/<span class="number">002</span>/<span class="number">003</span>  --在当前目录下嵌套建立指定目录(要带上当前目录)</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//创建文件</span><br><span class="line">touch a.html --在当前目录创建一个空的a.html文件</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//查看文件内容</span><br><span class="line">more file1 --查看file1文件的内容，支持分页显示</span><br><span class="line">less file1 --查看file1文件的内容</span><br><span class="line">cat file1  --显示file1文件的内容</span><br><span class="line">tail -f file1   --查看file1的内容</span><br><span class="line">tail <span class="number">-100</span> file1 --查看file1的后<span class="number">100</span>行内容</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//搜索文件的内容</span><br><span class="line">grep aaa /home/bin/file1 --在file1文件中查询包含aaa的所有行</span><br><span class="line"> </span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//窗口切换+全屏</span><br><span class="line">Alt+<span class="number">1</span>     --切换窗口<span class="number">1</span></span><br><span class="line">Alt+<span class="number">2</span>     --切换窗口<span class="number">2</span></span><br><span class="line">Alt+Enter --全屏</span><br><span class="line"> </span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//编辑文件</span><br><span class="line">vi file1 --编辑file1文件内容</span><br><span class="line"> </span><br><span class="line">esc      --退出vi模式，跳入命令模式</span><br><span class="line"> </span><br><span class="line">:w       --保存，但不退出vi模式</span><br><span class="line">:w!      --强保存，但不退出vi模式</span><br><span class="line"> </span><br><span class="line">:wq      --保存，并退出vi</span><br><span class="line">:wq!     --强保存，并退出vi</span><br><span class="line">:q       --不保存，退出vi</span><br><span class="line">:q!      --不保存，强制退出vi</span><br><span class="line">:e!      --放弃所有修改，从上次保存文件开始再编辑</span><br><span class="line">Ctrl+Z   --将vi暂停（挂起）</span><br><span class="line">ctrl+c   --进入命令模式</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//查看当前的路径：pwd</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//打包文件</span><br><span class="line">tar -cvf file1.zip file1   --将file1打包成file1.zip格式，此处可以打包成任意格式，即后缀可以为任意的，.aaa,.bbb,.zip,.tar 等</span><br><span class="line">//解包文件</span><br><span class="line">tar -xvf file1.zip         --解压包file1.zip,如果当前目录已经有文件了，覆盖原文件，否则正常显示</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">*********************************系统命令*******************************</span><br><span class="line">man rm  --显示rm命令的使用说明</span><br><span class="line">w       --显示登录用户的详细信息，类似于who</span><br><span class="line">who     --显示登录用户</span><br><span class="line">last    --显示最近登录的用户</span><br><span class="line"> </span><br><span class="line">date    --显示当前时期和时间</span><br><span class="line"> </span><br><span class="line">su      --切换root用户</span><br><span class="line">su zy   --切换到zy用户</span><br><span class="line"> </span><br><span class="line">clear   --清屏</span><br><span class="line"> </span><br><span class="line">free    --查看系统内存和Swap分区情况</span><br><span class="line"> </span><br><span class="line">reboot  --重启虚拟机</span><br><span class="line">shutdown -r now --停止服务后重启计算机</span><br><span class="line">shutdown -h now --停止服务后关闭计算机</span><br><span class="line">halt     -关闭计算机</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">tips:如果操作中有特殊的符号，比如()等，记得加\转义一下，如你要删除file1_(<span class="number">1</span>).html，要写成 rm file1_\(<span class="number">1</span>\).html</span><br></pre></td></tr></table></figure><blockquote><p>说明：转载自<a href="https://blog.csdn.net/u014074697/article/details/86241642" target="_blank" rel="noopener">博客</a>。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Xshell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Xshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hadoop完全分布式搭建</title>
      <link href="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/"/>
      <url>/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#准备工作">准备工作</a></li><li><a href="#安装vmwareworkstation-pro和centos-7">安装VMwareWorkstation Pro和CentOS 7</a></li><li><a href="#配置静态ip">配置静态IP</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>&#8195;&#8195;下载三个软件：<br></p><ul><li><a href="https://www.vmware.com/" target="_blank" rel="noopener">VMwareWorkstation Pro</a>，软件的版本看自己的需求，我用的是<code>VMwareWorkstation Pro 15</code>，在下载的时候可能要求登录，但是有不登录下载的<a href="https://blog.csdn.net/ITloser_cartridge/article/details/91347452" target="_blank" rel="noopener">方法</a>。<br></li><li><a href="https://www.centos.org/" target="_blank" rel="noopener">CentOS</a>，同样的下什么版本看个人需求，我用的是<code>CentOS-7-x86_64-DVD-1908</code>，官网下载可能下载的很慢，我们可以通过<a href="https://blog.csdn.net/qq_35500685/article/details/92803963?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">阿里云镜像</a>下载。<br></li><li><a href="https://www.netsarang.com/zh/xshell-download/" target="_blank" rel="noopener">XSHELL6</a>。在界面的右栏的<code>家庭和学校用户的免费许可证</code>下点击<code>免费授权页面</code>，注册信息然后便可以收到下载链接（你注册时使用的邮箱）。</li></ul><hr><h2 id="安装VMwareWorkstation-Pro和CentOS-7"><a href="#安装VMwareWorkstation-Pro和CentOS-7" class="headerlink" title="安装VMwareWorkstation Pro和CentOS 7"></a>安装VMwareWorkstation Pro和CentOS 7</h2><p>&#8195;&#8195;这里推荐一个写的非常详细的<a href="https://www.cnblogs.com/double-K/p/10952233.html" target="_blank" rel="noopener">博客</a>，按照该博主的教程，不会出现什么问题。</p><h2 id="配置静态IP"><a href="#配置静态IP" class="headerlink" title="配置静态IP"></a>配置静态IP</h2><p>&#8195;&#8195;这里需要注意的是<code>centOS</code>版本不同，配置的方法也有些不同，但是大致过程是一样的。以下是<code>centOS7</code>的静态IP配置方法。<br><br>&#8195;&#8195;按照<a href="https://www.cnblogs.com/double-K/p/10952233.html" target="_blank" rel="noopener">博客</a>的过程安装好虚拟机以后，开启虚拟机（用户名和密码是之前安装的时候所设置的用户名和密码），在桌面右键<code>打开终端</code>，在终端中输入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su root  <span class="comment"># 如果本身已经是root用户跳过该命令行，否则就要切换为root用户，密码就是之前安装时设置的root密码</span></span><br><span class="line">cd /etc/sysconfig/network-scripts/</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><p>然后就能看到如下所示：<img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/network-scripts.png" alt="network-scripts"><br>找到你的界面中类似<code>ifcfg- ens32</code>的文件（一般都在前面），然后通过一下命令打开编辑<code>ifcfg- ens32</code>文件：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ifcfg- ens32 <span class="comment"># vim 你的文件名</span></span><br></pre></td></tr></table></figure><p>就可以看到：<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/ifcfg-ens32.png" alt="ifcfg-ens32"><br>然后在英文输入法下，按<code>i</code>进入编辑模式（按下i之后光标由粗变细），通过<code>上下左右键</code>移动光标，将划红线部分，改为和上图一致，改好以后按下<code>ESC</code>，再输入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq  <span class="comment"># 注意前面的冒号是英文的冒号</span></span><br></pre></td></tr></table></figure><p>保存并退出。上图重要参数的意思参考如下：<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A.png" alt="参数解释"><br>接下来，来到<code>VMware Worksation</code>点击左上角的<code>编辑</code>并进入<code>虚拟网络编辑器</code>。<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C%E7%BC%96%E8%BE%91%E5%99%A8.png" alt="虚拟网络编辑器"><br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/VMnet8.png" alt="VMnet8"><br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/NAT.png" alt="NAT"><br>记住上图中 <code>子网IP</code>、<code>子网掩码</code>以及<code>网关</code>三个数据，然后进入编辑之前的<code>ifcfg- ens32</code>文件，在文件末尾追加信息如下：<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/IP%E5%9C%B0%E5%9D%80%E7%AD%89%E9%85%8D%E7%BD%AE.png" alt="IP地址等配置"><br>需要注意的是设置的<code>IPADDR</code>不要和网关一致并且要和<code>子网IP</code>一个网段。然后通过命令：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network.service</span><br></pre></td></tr></table></figure><p>重启网络设置。<br><br>再通过命令：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p>查看当前虚拟机的网络设置是否和设置的一致。<br><br>&#8195;&#8195;接下来关闭防火墙，不然虚拟机无法连接外网。<code>centOS7</code>中可以通过如下命令选择自行选择暂时关闭防火墙还是永久关闭防火墙。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld  <span class="comment"># 启动</span></span><br><span class="line">systemctl status firewalld  <span class="comment"># 查看状态</span></span><br><span class="line">systemctl disable firewalld  <span class="comment"># 停用</span></span><br><span class="line">systemctl stop firewalld  <span class="comment"># 禁用</span></span><br></pre></td></tr></table></figure><p>如果你是<code>centOS6</code>可以通过如下命令关闭防火墙。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop  <span class="comment"># 停用</span></span><br><span class="line">service iptables start  <span class="comment"># 启动</span></span><br><span class="line">service iptables restart  <span class="comment"># 重启</span></span><br><span class="line">service iptables status  <span class="comment"># 查看状态</span></span><br><span class="line">chkconfig iptables off  <span class="comment"># 禁用</span></span><br><span class="line">chkconfig iptables on  <span class="comment"># 永久开启</span></span><br></pre></td></tr></table></figure><p>完成这一步之后，虚拟器就应该可以ping通外网了。可以在虚拟机的命令行输入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure><p>如果出现如下结果，说明成功了：<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/ping_baidu.png" alt="ping_baidu"><br>如果出现了可以ping通主机（就是你的电脑）,但是不能ping通外网，可以参考<a href="https://blog.csdn.net/Hi_alan/article/details/98633468?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-1" target="_blank" rel="noopener">博客</a>。</p>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git的安装与配置</title>
      <link href="/2020/02/23/git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/02/23/git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#目的">目的</a></li><li><a href="#git的下载和安装">git的下载和安装</a></li><li><a href="#git的基本工作流程">git的基本工作流程</a></li><li><a href="#gti的基础设置">gti的基础设置</a></li><li><a href="#说明">说明</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>通过git可以管理github项目代码，个人博客的搭建过程中也需要git的环境配置。</p><hr><h2 id="git的下载和安装"><a href="#git的下载和安装" class="headerlink" title="git的下载和安装"></a>git的下载和安装</h2><p>在<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git官网</a>下载对应版本的git软件：<br><img src="/2020/02/23/git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/git%E4%B8%8B%E8%BD%BD.png" alt="image"><br>然后双击安装即可，在选择<code>Adjusting your PATH environment</code>时选择<code>Use Git from Git Bash only</code>（其余默认，如果不想安装在默认路径，记得更改安装路径）。<br>若在桌面鼠标右键有<code>Git GUI Here</code>和<code>Git Bash Here</code>两个选项，则说明安装成功。</p><hr><h2 id="git的基本工作流程"><a href="#git的基本工作流程" class="headerlink" title="git的基本工作流程"></a>git的基本工作流程</h2><p>详细可见<a href="https://www.bilibili.com/video/av39189147?p=7" target="_blank" rel="noopener">视频教学</a>，分享者：<a href="https://space.bilibili.com/346057315?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">Fm-C</a>。<br><img src="/2020/02/23/git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/git%E6%93%8D%E4%BD%9C%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%E8%A1%8C.png" alt="git操作基本命令行"></p><hr><h2 id="gti的基础设置"><a href="#gti的基础设置" class="headerlink" title="gti的基础设置"></a>gti的基础设置</h2><p>在桌面新建一个文件夹（作为git工作路径），在该文件夹内鼠标右键选择<code>Git Bash Here</code>。<br>然后，在<code>Git Bash Here</code>界面通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="keyword">global</span> user.name <span class="string">'github用户名'</span></span><br><span class="line">git config --<span class="keyword">global</span> user.email <span class="string">'github绑定的邮箱'</span></span><br></pre></td></tr></table></figure><p>初始化你的个人信息， 你可以通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure><p>查看<code>user.name</code>和<code>user.email</code>两个属性是否设置成功。</p><hr><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><blockquote><p>上述内容是我学习b站<a href="https://space.bilibili.com/346057315?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">Fm-C</a>分享的公开课<a href="https://www.bilibili.com/video/av39189147?p=6" target="_blank" rel="noopener">Github使用教程-黑马程序员</a>总结得出。<br>该公开课讲解的非常详细，有兴趣的朋友可以去观看公开课视频！</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于hexo、github搭建个人博客</title>
      <link href="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#环境">环境</a></li><li><a href="#第一步安装notejs">第一步（安装note.js）</a></li><li><a href="#第二步安装cnpm">第二步（安装cnpm）</a></li><li><a href="#第三步安装hexo并初始化博客">第三步（安装hexo并初始化博客）</a></li><li><a href="#第四步新建一篇博文并上传到github">第四步（新建一篇博文并上传到github）</a></li><li><a href="#第五步设置主题">第五步（设置主题）</a></li><li><a href="#问题总结">问题总结</a></li><li><a href="#说明">说明</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>已下载并配置好<code>Git</code>环境的<code>Windows10</code>系统（可以参考我的另外一篇博客<code>git的安装与配置</code>），<br>当然后面的操作也适用于<code>Mac</code>系统，但需要注意<code>Win</code>和<code>Mac</code>终端命令行略有差别，不可照搬，如果在<code>Mac</code>上命令运行不了，则需要查找相应的<code>Mac</code>终端命令行。</p><hr><h2 id="第一步（安装note-js）"><a href="#第一步（安装note-js）" class="headerlink" title="第一步（安装note.js）"></a>第一步（安装note.js）</h2><p>下载<a href="https://nodejs.org/en/" target="_blank" rel="noopener">node.js</a>，如下图所示：<br><img src="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/node.png" alt="下载示意图"><br>下载下来以后，点击默认安装就可以了，如果不喜欢安装在C盘，可以自行更改安装目录。<br>安装好以后，在桌面任务栏点击搜索，输入cmd并选择以<code>管理员身份运行</code>，然后可进行如下操作：<br><img src="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/%E9%80%9A%E8%BF%87%E4%BB%A3%E7%A0%81%E6%9F%A5%E8%AF%A2node%E5%92%8Cnpm%E7%89%88%E6%9C%AC.png" alt="image"><br>如果可以通过代码查找到node和npm的版本，那说明node.js已经安装好了。</p><hr><h2 id="第二步（安装cnpm）"><a href="#第二步（安装cnpm）" class="headerlink" title="第二步（安装cnpm）"></a>第二步（安装cnpm）</h2><p>国内通过npm下载东西很慢，我们可以通过npm全局安装cnpm并指定淘宝源，以提升后续操作的速度，相应命令行如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure><p>然后通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm -v</span><br></pre></td></tr></table></figure><p>查找到安装的cnpm版本。</p><hr><h2 id="第三步（安装hexo并初始化博客）"><a href="#第三步（安装hexo并初始化博客）" class="headerlink" title="第三步（安装hexo并初始化博客）"></a>第三步（安装hexo并初始化博客）</h2><p>通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>全局安装hexo框架，再通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure><p>查询安装的hexo版本，然后在当前路径下，通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir 文件夹名称</span><br></pre></td></tr></table></figure><p>新建一个空文件夹（命名看个人，我将其命名为blog），后面这个文件夹会包含你博客的所有内容（如果不想在当前路径下工作，可以通过命令行<code>cd 路径</code>更改路径再新建文件夹），然后在blog的路径下通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>初始化一个博客，等命令行运行完之后，便可以看到在blog文件夹内新增了许多文件，这些是hexo生成的博客基础框架。<br>最后通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>生成初始博客界面，可以通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:<span class="number">4000</span></span><br></pre></td></tr></table></figure><p>访问该初始博客界面。</p><hr><h2 id="第四步（新建一篇博文并上传到github）"><a href="#第四步（新建一篇博文并上传到github）" class="headerlink" title="第四步（新建一篇博文并上传到github）"></a>第四步（新建一篇博文并上传到github）</h2><p>通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">"文件名"</span></span><br></pre></td></tr></table></figure><p>创建一个新的md文件（上述引号为英文输入法的引号，new和文件名之间有空格），该文件会保存在路径<code>blog\source\_posts</code>中，你可以通过下载<a href="https://notepad-plus-plus.org/downloads/" target="_blank" rel="noopener">Notepad++</a>或者<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VS Code</a>来编辑该md文件，需要注意的是博文一般都是以<a href="https://www.jianshu.com/p/b03a8d7b1719" target="_blank" rel="noopener">Markdown</a>格式编写。<br>例如，编辑test.md文件内容如下：<br><img src="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/test.png" alt="image"><br>（注意上面图片中<code>##</code>后面均有一个空格）保存以后在blog路径下按顺序运行命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>再打开本地链接<code>http://localhost:4000</code>，就可以看到：<br><img src="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/test%E7%BB%93%E6%9E%9C.png" alt="image"><br>看完之后记得<code>ctrl+c</code>打断<code>hexo server</code>。</p><p>点击<a href="https://github.com/" target="_blank" rel="noopener">github</a>注册并登录，然后创建一个名为<code>github用户名.github.io</code>的仓库（仓库名必须是这个格式），如果不会可以在网上查询教程， 这里就不再详述。<br>完成上面这一步之后，回到终端界面，在blog路径下通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo -deployer-git --save</span><br></pre></td></tr></table></figure><p>下载git部署插键，若安装过程中有warning提示不用管，等待安装完成即可。</p><p>接下来，我们找到blog文件夹里的<code>_config.yml</code>文件，右键选择<code>NotePad++</code>打开编辑，找到<code>deploy</code>设置（文件最下面），将其设置如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type: git</span><br><span class="line">repo: https://github.com/github用户名/github用户名.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure><p>（注意！注意！注意！冒号后面均有一个空格）然后保存并退出。然后在终端界面blog路径下通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>将blog配置文件上传到github的<code>github用户名.github.io</code>库中（第一次上传会提示输入github用户名和密码），然后就可以通过<code>https://github用户名.github.io/</code>访问博客界面啦！（有时github网站访问比较慢或出现404错误，需要多刷新几次）。</p><hr><h2 id="第五步（设置主题）"><a href="#第五步（设置主题）" class="headerlink" title="第五步（设置主题）"></a>第五步（设置主题）</h2><p><code>hexo</code>自带主题比较简单，你可以自己下载开源主题。这里给一个推荐：<code>https://github.com/litten/hexo-theme-yilia</code>。</p><p>在blog路径下，通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/litten/hexo-theme-yilia.git clone themes</span><br></pre></td></tr></table></figure><p>下载<code>yilia</code>主题到<code>blog\themes</code>路径下（有梯子的朋友可以打开梯子，这样会加快下载速度）。</p><p>然后再次找到blog文件夹里的<code>_config.yml</code>文件，右键选择<code>NotePad++</code>打开编辑，找到<code>theme</code>设置，将其改为：<code>theme: yilia</code>（同样的冒号后面有一个空格），保存退出。<br>最后在终端blog路径下，按顺序输入命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br><span class="line">ctrl + c(组合键,打断)</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>你就可以通过<code>https://github用户名.github.io/</code>访问新主题的博客界面啦！（若博客界面没有变化，多刷新等待一会儿）</p><hr><h2 id="问题总结"><a href="#问题总结" class="headerlink" title="问题总结"></a>问题总结</h2><p>1、如果上传的图片博客界面无法显示，参考<a href="https://www.jianshu.com/p/3db6a61d3782" target="_blank" rel="noopener">链接1</a>。<br>2、如果搭建 <code>hexo</code>，在执行<code>hexo deploy</code> 后,出现 <code>error deployer not found:git</code>的错误，参考<a href="https://blog.csdn.net/Qin605/article/details/71124757" target="_blank" rel="noopener">链接2</a>。</p><hr><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><blockquote><p>上述内容是我学习b站<a href="https://space.bilibili.com/384068749?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">CodeSheep</a>制作的<a href="https://www.bilibili.com/video/av44544186?t=402" target="_blank" rel="noopener">手把手教你从0开始搭建自己的个人博客 |无坑版视频教程| hexo</a>总结得出。<br>该up主讲解的非常详细，有兴趣的朋友可以去观看他的视频！</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
