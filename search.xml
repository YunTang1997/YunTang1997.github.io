<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linux常用命令及重要文件</title>
      <link href="/2020/06/22/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2020/06/22/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#开机重启和用户登录">开机、重启和用户登录</a></li><li><a href="#用户注销">用户注销</a></li><li><a href="#用户管理">用户管理</a></li><li><a href="#用户组管理">用户组管理</a></li><li><a href="#用户和组的相关文件">用户和组的相关文件</a></li><li><a href="#指定运行级别">指定运行级别</a><ul><li><a href="#应用">应用</a></li></ul></li><li><a href="#帮助指令">帮助指令</a></li><li><a href="#文件目录指令">文件目录指令</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="开机、重启和用户登录"><a href="#开机、重启和用户登录" class="headerlink" title="开机、重启和用户登录"></a>开机、重启和用户登录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shutdwon -h now  <span class="comment"># 立刻关机</span></span><br><span class="line">shutdwon -h <span class="number">1</span>  <span class="comment"># 1分钟以后关机</span></span><br><span class="line">shutdwon -r now  <span class="comment"># 立刻重启计算机</span></span><br><span class="line">halt  <span class="comment"># 立刻关机，同1</span></span><br><span class="line">reboot  <span class="comment"># 立刻重启，同3</span></span><br><span class="line">sync  <span class="comment"># 把内存的数据同步到磁盘</span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;<font color="red">注意：不管是重启系统还是关闭系统，首先要运行sync命令，把内存中的数据写到磁盘中，防止数据丢失。</font></p><hr><h2 id="用户注销"><a href="#用户注销" class="headerlink" title="用户注销"></a>用户注销</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logout  <span class="comment"># 注意该命令在图形运行界面无效</span></span><br></pre></td></tr></table></figure><hr><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useradd [选项] 用户名  <span class="comment"># 默认家里目录路径为/home/用户名</span></span><br><span class="line">useradd -d 路径 用户名  <span class="comment"># 为创建用户名并指定家目录路径</span></span><br><span class="line">passwd 用户名  <span class="comment"># 为该用户名添加密码</span></span><br><span class="line">userdel 用户名  <span class="comment"># 删除用户名并且保留该用户的家目录</span></span><br><span class="line">userdel -r 用户名  <span class="comment"># 删除用户名以及该用户的家目录</span></span><br><span class="line">id 用户名  <span class="comment"># 查看用户信息</span></span><br><span class="line">su - 用户名  <span class="comment"># 切换用户名，输入exit返回原用户</span></span><br></pre></td></tr></table></figure><p><font color="red">&#8195;&#8195;删除用户时，一般会保留家目录。</font></p><hr><h2 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h2><blockquote><p>组，类似于角色，系统可以对有共性的多个用户进行管理。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groupadd 组名  <span class="comment"># 创建组</span></span><br><span class="line">groupdel 组名  <span class="comment"># 删除组</span></span><br><span class="line">uesradd -g 用户组 用户名  <span class="comment"># 创建用户名同时指定其所属组名（不加-g参数，默认用户名所属组名和用户名相同）</span></span><br><span class="line">uesrmod -g 用户组 用户名  <span class="comment"># 修改用户的组</span></span><br></pre></td></tr></table></figure><hr><h2 id="用户和组的相关文件"><a href="#用户和组的相关文件" class="headerlink" title="用户和组的相关文件"></a>用户和组的相关文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/passwd</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;以上路径下的文件为<code>用户（user）</code>的配置文件，记录用户的各种信息。<br>&#8195;&#8195;其中每行的含义为：<br>&#8195;&#8195;<font color="red">用户名：口令：用户标识号：组标识号：注释性描述：主目录：登录Shell</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/shadow</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;以上路径下的文件为<code>口令</code>配置文件。<br>&#8195;&#8195;其中每行的含义为：<br>&#8195;&#8195;<font color="red">登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/group</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;以上路径下的文件为<code>组（group）</code>的配置文件，记录Linux包含组的各种信息。<br>&#8195;&#8195;其中每行的含义为：<br>&#8195;&#8195;<font color="red">组名：口令：组标识号：组内用户表</font></p><hr><h2 id="指定运行级别"><a href="#指定运行级别" class="headerlink" title="指定运行级别"></a>指定运行级别</h2><ul><li>0：关机</li><li>1：单用户（找回丢失密码）</li><li>2：多用户状态没有网络服务</li><li>3：<font color="red">多用户状态有网络服务</font></li><li>4：系统未使用保留给用户（保留）</li><li>5：<font color="red">图形界面</font></li><li>6：系统重启</li></ul><p>&#8195;&#8195;常用运行级别为3和5。<br>&#8195;&#8195;要修改默认的运行级别可修改文件<code>/etc/inittab的id:5:initdefault:这一行中的数字。</code><br>&#8195;&#8195;切换运行级别命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init[<span class="number">0123456</span>]  <span class="comment"># 切换运行级别</span></span><br></pre></td></tr></table></figure><h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>&#8195;&#8195;问：如果忘记了root密码，如何找回root密码？<br>&#8195;&#8195;答：进入<code>单用户模式</code>，然后修改root密码，因为进入单用户模式，root不需要密码就可以登陆。具体过程如下：</p><ol><li>开机<br></li><li>在引导时输入<code>回车键</code><br></li><li>在界面输入<code>e</code><br></li><li>选中界面第二行（编辑内核）<br></li><li>输入<code>e</code><br></li><li>在界面最后一行输入<code>空格和1</code><br></li><li>输入<code>回车键</code><br></li><li>输入<code>b</code><br></li><li>此时进入单用户模式<br></li><li>单用户模式下利用<code>passwd</code>修改root密码<br></li></ol><hr><h2 id="帮助指令"><a href="#帮助指令" class="headerlink" title="帮助指令"></a>帮助指令</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">man [命令或配置文件]  <span class="comment"># 功能描述，获得帮助信息</span></span><br><span class="line">help 命令  <span class="comment"># 共能描述：获得shell内置命令的帮助信息</span></span><br></pre></td></tr></table></figure><hr><h2 id="文件目录指令"><a href="#文件目录指令" class="headerlink" title="文件目录指令"></a>文件目录指令</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">pwd  <span class="comment"># 显示当前工作目录的绝对路径</span></span><br><span class="line">ls -[a l]  <span class="comment"># -a：显示当前目录所有的文件和目录，包括隐藏文件；-l：以列表的方式显示信息</span></span><br><span class="line">cd 路径  <span class="comment"># 切换到指定的路径</span></span><br><span class="line">cd ~或者cd :  <span class="comment"># 回到家目录</span></span><br><span class="line">cd ..  <span class="comment"># 回到当前路径的上一级目录</span></span><br><span class="line">mkdir [-p] 要创建的目录  <span class="comment"># -p表示要创建多级目录</span></span><br><span class="line">rmdir 空目录  <span class="comment"># 删除空目录</span></span><br><span class="line">rm -rf 非空目录或文件  <span class="comment"># 删除非空目录或文件，-r表示递归删除，-f强制删除不提示</span></span><br><span class="line">touch 文件名称.后缀名  <span class="comment"># 创建文件</span></span><br><span class="line">[\]cp [-r] 文件 目标路径  <span class="comment"># 拷贝文件到指定目录，\表示强制覆盖，-r表示递归复制</span></span><br><span class="line">scp -r $pdir/$fname $user@hadoop$host:$pdir/$fname  <span class="comment"># scp（secure copy）安全拷贝，可以实现服务器与服务器之间的数据拷贝。（from server1 to server2）</span></span><br><span class="line"><span class="comment"># 命令 递归 要拷贝的文件路径/名称 目的用户@主机:目的路径/名称</span></span><br><span class="line">rsync -rvl $pdir/$fname $user@hadoop$host:$pdir/$fname  <span class="comment"># rsync主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点（参数详情见下面表格）</span></span><br><span class="line"><span class="comment"># 命令 选项参数 要拷贝的文件路径/名称 目的用户@主机:目的路径/名称</span></span><br><span class="line">mv 文件 目标路径 <span class="comment"># 移动文件与目录</span></span><br><span class="line">mv 旧文件名 新文件名  <span class="comment"># 文件重命名</span></span><br><span class="line">cat [-n] 文件 [| more] <span class="comment"># 查看文件内容（只能查看不能修改），-n表示显示行号，more表示分页显示（用空格换页）</span></span><br><span class="line">tac 文件名  <span class="comment"># 从文件最后一行显示信息，与cat相反</span></span><br><span class="line">nl 文件名  <span class="comment"># 查看文件内容，默认显示行号</span></span><br><span class="line">more 文件名  <span class="comment"># 查看文件内容（详情见下面表格）</span></span><br><span class="line">less 文件名  <span class="comment"># 查看文件内容（详情见下面表格）</span></span><br></pre></td></tr></table></figure><p><code>rsync</code>参数含义：</p><table><thead><tr><th align="center">选项</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">-r</td><td align="center">递归</td></tr><tr><td align="center">-v</td><td align="center">显示复制过程</td></tr><tr><td align="center">-l</td><td align="center">拷贝符号链接</td></tr></tbody></table><p><code>more</code>指令</p><table><thead><tr><th align="center">操作</th><th align="center">功能说明</th></tr></thead><tbody><tr><td align="center">空格键</td><td align="center">向下换一页</td></tr><tr><td align="center">Enter</td><td align="center">向下翻一行</td></tr><tr><td align="center">q</td><td align="center">立刻离开more，不再显示该文件内容</td></tr><tr><td align="center">Ctrl + f</td><td align="center">向下滚动一屏</td></tr><tr><td align="center">Ctrl + b</td><td align="center">返回上一屏</td></tr><tr><td align="center">=</td><td align="center">输出当前的行号</td></tr><tr><td align="center">:f</td><td align="center">输出文件名和当前的行号</td></tr></tbody></table><p><code>less</code>指令：</p><table><thead><tr><th align="center">操作</th><th align="center">功能说明</th></tr></thead><tbody><tr><td align="center">空格键</td><td align="center">向下换一页</td></tr><tr><td align="center">Enter</td><td align="center">向下翻一行</td></tr><tr><td align="center">[pagedown]</td><td align="center">向下翻动一页</td></tr><tr><td align="center">[pageup]</td><td align="center">向上翻动一页</td></tr><tr><td align="center">/字串</td><td align="center">向下搜寻[字串]的共能；n：向下查找，N：向上查找</td></tr><tr><td align="center">?字串</td><td align="center">向上搜寻[字串]的共能；n：向上查找，N：向下查找</td></tr><tr><td align="center">q</td><td align="center">离开less</td></tr></tbody></table><p><font color="red">注意：less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据需要显示加载内容，对于显示大型文件具有较高的效率。</font><br>&#8195;&#8195;补充<code>xsync</code>脚本，它的作用是：循环复制文件到所有节点的相同目录下。具体脚本如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#1 获取输入参数个数，如果没有参数，直接退出</span></span><br><span class="line">pcount=$<span class="comment">#</span></span><br><span class="line"><span class="keyword">if</span>((pcount==<span class="number">0</span>)); then</span><br><span class="line">echo no args;</span><br><span class="line">exit;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="comment">#2 获取文件名称</span></span><br><span class="line">p1=$<span class="number">1</span></span><br><span class="line">fname=`basename $p1`</span><br><span class="line">echo fname=$fname</span><br><span class="line"></span><br><span class="line"><span class="comment">#3 获取上级目录到绝对路径</span></span><br><span class="line">pdir=`cd -P $(dirname $p1); pwd`</span><br><span class="line">echo pdir=$pdir</span><br><span class="line"></span><br><span class="line"><span class="comment">#4 获取当前用户名称</span></span><br><span class="line">user=`whoami`</span><br><span class="line"></span><br><span class="line"><span class="comment">#5 循环</span></span><br><span class="line"><span class="keyword">for</span>((host=<span class="number">103</span>; host&lt;<span class="number">105</span>; host++)); do</span><br><span class="line">        echo ------------------- hadoop$host --------------</span><br><span class="line">        rsync -rvl $pdir/$fname $user@hadoop$host:$pdir</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;<code>cat</code>进阶使用：显示文件的1000行到3000行</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat filename | tail -n + <span class="number">1000</span> | head -n <span class="number">2000</span></span><br><span class="line">cat filename | head -n <span class="number">3000</span> | tail -n +<span class="number">1000</span></span><br></pre></td></tr></table></figure><blockquote><p>head -n 1000：显示前1000行<br>tail -n 1000：显示后1000行<br>tail -n + 1000：从第1000行开始显示，显示1000行以后的内容</p></blockquote><p>&#8195;&#8195;如果使用<code>sed</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'1000, 3000p'</span> filename</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql排序查询</title>
      <link href="/2020/06/21/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5(%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2)/"/>
      <url>/2020/06/21/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5(%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2)/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#排序查询语法">排序查询语法</a></li><li><a href="#按表达式排序">按表达式排序</a></li><li><a href="#按别名排序">按别名排序</a></li><li><a href="#按函数排序">按函数排序</a></li><li><a href="#升降混合排序">升降混合排序</a></li><li><a href="#练习">练习</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="排序查询语法"><a href="#排序查询语法" class="headerlink" title="排序查询语法"></a>排序查询语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">SELECT </span><br><span class="line">    查询列表</span><br><span class="line">FROM</span><br><span class="line">    表</span><br><span class="line">（WHERE</span><br><span class="line">    筛选条件）</span><br><span class="line">ORDER BY 排序列表 ASC（升序，可省略） | DESC（降序）</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、ASC表示升序，DESC表示降序，不写默认表示升序</span><br><span class="line"><span class="number">2</span>、ORDER BY子句中可以支持单个字段、多个字段、表达式、函数、别名</span><br><span class="line"><span class="number">3</span>、ORDER BY子句一般是放在查询语句的最后面，但是LIMIT子句除外</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 案例一</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY salary DESC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY salary ASC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 案例二</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    department_id &gt;= <span class="number">90</span></span><br><span class="line">ORDER BY hiredate ASC;</span><br></pre></td></tr></table></figure><hr><h2 id="按表达式排序"><a href="#按表达式排序" class="headerlink" title="按表达式排序"></a>按表达式排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    *, salary * <span class="number">12</span> * (<span class="number">1</span> + ifnull(commission_pct, <span class="number">0</span>)) AS <span class="string">'年薪'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY salary * <span class="number">12</span> * (<span class="number">1</span> + ifnull(commission_pct, <span class="number">0</span>)) DESC;</span><br></pre></td></tr></table></figure><hr><h2 id="按别名排序"><a href="#按别名排序" class="headerlink" title="按别名排序"></a>按别名排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    *, salary * <span class="number">12</span> * (<span class="number">1</span> + ifnull(commission_pct, <span class="number">0</span>)) AS <span class="string">'年薪'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY <span class="string">'年薪'</span> DESC;</span><br></pre></td></tr></table></figure><hr><h2 id="按函数排序"><a href="#按函数排序" class="headerlink" title="按函数排序"></a>按函数排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name, LENGTH(last_name) AS <span class="string">'字节长度'</span>, salary</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY LENGTH(last_name) ASC;</span><br></pre></td></tr></table></figure><hr><h2 id="升降混合排序"><a href="#升降混合排序" class="headerlink" title="升降混合排序"></a>升降混合排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 案例：查询员工信息，要求先按工资排序（升序），再按员工编号排序（降序）</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY salary ASC , employee_id DESC;</span><br></pre></td></tr></table></figure><hr><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name,</span><br><span class="line">    department_id,</span><br><span class="line">    salary * <span class="number">12</span> * (<span class="number">1</span> + IFNULL(commission_pct, <span class="number">0</span>)) AS <span class="string">'年薪'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY <span class="string">'年薪'</span> DESC , last_name ASC;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    last_name, salary</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    NOT (salary BETWEEN <span class="number">8000</span> AND <span class="number">17000</span>)</span><br><span class="line">ORDER BY salary DESC;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    *, LENGTH(email)</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    email LIKE <span class="string">'%e%'</span></span><br><span class="line">ORDER BY LENGTH(email) DESC , department_id ASC;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql条件查询</title>
      <link href="/2020/06/21/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2)/"/>
      <url>/2020/06/21/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2)/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#条件查询语法">条件查询语法</a></li><li><a href="#按条件表达式筛选">按条件表达式筛选</a></li><li><a href="#按逻辑表示筛选">按逻辑表示筛选</a></li><li><a href="#模糊查询">模糊查询</a></li><li><a href="#like">like</a></li><li><a href="#between-and">between and</a></li><li><a href="#in">in</a></li><li><a href="#is-nullis-not-null">is null、is not null</a></li><li><a href="#安全等于判断是否等于null或者数值如果等于返回true但可读性很差">安全等于（&lt;=&gt;），判断是否等于null或者数值，如果等于返回true，但可读性很差</a></li><li><a href="#练习">练习</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="条件查询语法"><a href="#条件查询语法" class="headerlink" title="条件查询语法"></a>条件查询语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">SELECT </span><br><span class="line">    查询列表</span><br><span class="line">FROM</span><br><span class="line">    表名</span><br><span class="line">WHERE</span><br><span class="line">    筛选条件;</span><br><span class="line">    </span><br><span class="line">分类：</span><br><span class="line"><span class="number">1</span>、按条件表达式筛选：条件运算符：&gt; &lt; = （!= &lt;&gt;） &gt;= &lt;=</span><br><span class="line"><span class="number">2</span>、按逻辑表达式筛选：逻辑运算符：&amp;&amp; || ！<span class="keyword">and</span> <span class="keyword">or</span> <span class="keyword">not</span></span><br><span class="line"><span class="number">3</span>、模糊查询：ilke between <span class="keyword">and</span> <span class="keyword">in</span> <span class="keyword">is</span> null</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><hr><h2 id="按条件表达式筛选"><a href="#按条件表达式筛选" class="headerlink" title="按条件表达式筛选"></a>按条件表达式筛选</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">1</span>：查询工资&gt;<span class="number">12000</span>的员工信息</span><br><span class="line">SELECT </span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    salary &gt; <span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line">-- 案例<span class="number">2</span>：查询部门编号不等于<span class="number">90</span>号的员工名和部门编号</span><br><span class="line">SELECT </span><br><span class="line">    employee_id, department_id</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    department_id != <span class="number">90</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="按逻辑表示筛选"><a href="#按逻辑表示筛选" class="headerlink" title="按逻辑表示筛选"></a>按逻辑表示筛选</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">1</span>：查询部门编号不是在<span class="number">90</span>到<span class="number">110</span>之间，或者工资高于<span class="number">15000</span>的员工信息</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    NOT (<span class="number">90</span> &lt;= department_id</span><br><span class="line">        AND department_id &lt;= <span class="number">110</span>)</span><br><span class="line">        OR salary &gt; <span class="number">15000</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">like</span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、一般和通配符搭配使用。</span><br><span class="line">通配符：</span><br><span class="line">% 任意多个字符，包含<span class="number">0</span>个字符</span><br><span class="line">        _ 任意单个字符</span><br><span class="line"></span><br><span class="line">between <span class="keyword">and</span></span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、提升代码简洁度</span><br><span class="line"><span class="number">2</span>、包含临界值</span><br><span class="line"><span class="number">3</span>、临界值不要调换顺序</span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> </span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、提升语句简洁度</span><br><span class="line"><span class="number">2</span>、<span class="keyword">in</span>列表的值类型必须一致或兼容</span><br><span class="line"><span class="number">3</span>、不能使用通用符</span><br><span class="line"></span><br><span class="line"><span class="keyword">is</span> null、<span class="keyword">is</span> <span class="keyword">not</span> null</span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、=或者&lt;&gt;不能用于判断null值</span><br><span class="line"><span class="number">2</span>、<span class="keyword">is</span> null或者<span class="keyword">is</span> <span class="keyword">not</span> null 可以判断null值</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><hr><h2 id="like"><a href="#like" class="headerlink" title="like"></a>like</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">1</span>：查询员工名中包含字符a的员工信息</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'%a%'</span>;</span><br><span class="line">    </span><br><span class="line">-- 案例<span class="number">2</span>：查询员工名中第三个字符为e，第五个字符为a的员工名和工资</span><br><span class="line">SELECT </span><br><span class="line">    last_name, salary</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'__e_a%'</span>;</span><br><span class="line"></span><br><span class="line">-- 案例<span class="number">3</span>：查询员工名中第二个字符串为_的员工名</span><br><span class="line">-- 方法一</span><br><span class="line">SELECT </span><br><span class="line">    last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'_\_%'</span>;</span><br><span class="line"></span><br><span class="line">-- 方法二</span><br><span class="line">-- escape关键词表示后面的符号为转义符</span><br><span class="line">SELECT </span><br><span class="line">    last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'_$_%'</span> ESCAPE <span class="string">'$'</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="between-and"><a href="#between-and" class="headerlink" title="between and"></a>between and</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">3</span>：查询员工编号在<span class="number">100</span>到<span class="number">120</span>之间的员工信息</span><br><span class="line">-- 方法一</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    employee_id &gt;= <span class="number">100</span></span><br><span class="line">        AND employee_id &lt;= <span class="number">120</span>;</span><br><span class="line"></span><br><span class="line">-- 方法二</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    employee_id BETWEEN <span class="number">100</span> AND <span class="number">120</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="in"><a href="#in" class="headerlink" title="in"></a>in</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">4</span>：查询员工的工种编号是IT_PROG、AD_VP、AD_PRES中的一个的员工名和工种编号</span><br><span class="line">-- 方法一</span><br><span class="line">SELECT </span><br><span class="line">    last_name, job_id</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    job_id = <span class="string">'IT_PROG'</span> OR job_id = <span class="string">'AD_VP'</span></span><br><span class="line">        OR job_id = <span class="string">'AD_PRES'</span>;</span><br><span class="line"></span><br><span class="line">-- 方法二</span><br><span class="line">SELECT </span><br><span class="line">    last_name, job_id</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    job_id IN (<span class="string">'IT_PROG'</span> , <span class="string">'AD_VP'</span>, <span class="string">'AD_PRES'</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="is-null、is-not-null"><a href="#is-null、is-not-null" class="headerlink" title="is null、is not null"></a>is null、is not null</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 案例<span class="number">1</span>：查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">    last_name, commission_pct</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    commission_pct IS NULL;</span><br><span class="line">    </span><br><span class="line">-- 案例<span class="number">2</span>：查询有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">    last_name, commission_pct</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    commission_pct IS NOT NULL;</span><br></pre></td></tr></table></figure><hr><h2 id="安全等于（-lt-gt-），判断是否等于null或者数值，如果等于返回true，但可读性很差"><a href="#安全等于（-lt-gt-），判断是否等于null或者数值，如果等于返回true，但可读性很差" class="headerlink" title="安全等于（&lt;=&gt;），判断是否等于null或者数值，如果等于返回true，但可读性很差"></a>安全等于（&lt;=&gt;），判断是否等于null或者数值，如果等于返回true，但可读性很差</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name, commission_pct</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    commission_pct &lt;=&gt; NULL;</span><br><span class="line">```    </span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="comment">## 练习</span></span><br><span class="line">```python</span><br><span class="line">-- 查询员工为<span class="number">176</span>号的员工的姓名、部门号和年薪</span><br><span class="line">SELECT </span><br><span class="line">    last_name,</span><br><span class="line">    department_id,</span><br><span class="line">    salary * <span class="number">12</span> * (<span class="number">1</span> + IFNULL(commission_pct, <span class="number">0</span>)) AS 年薪</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    employee_id = <span class="number">176</span>;</span><br><span class="line">    </span><br><span class="line">-- 选择工资不在<span class="number">5000</span>到<span class="number">12000</span>的员工的姓名和工资 </span><br><span class="line">SELECT </span><br><span class="line">    last_name, salary</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    NOT (salary BETWEEN <span class="number">5000</span> AND <span class="number">12000</span>);</span><br><span class="line">    </span><br><span class="line">-- 选择姓名中有字母a和e的员工姓名 </span><br><span class="line">SELECT </span><br><span class="line">    last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    last_name LIKE <span class="string">'%a%e%'</span>;</span><br><span class="line">    </span><br><span class="line">-- 显示出表employees的manager_id是<span class="number">100</span>,<span class="number">101</span>,<span class="number">110</span> 的员工姓名、职位 </span><br><span class="line">SELECT </span><br><span class="line">    last_name, job_id</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    manager_id IN (<span class="number">100</span> , <span class="number">101</span>, <span class="number">110</span>);</span><br><span class="line"></span><br><span class="line">-- 查询没有奖金，且工资小于<span class="number">18000</span>的salary，last_name</span><br><span class="line">SELECT </span><br><span class="line">    salary, last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    salary &lt; <span class="number">18000</span></span><br><span class="line">        AND commission_pct IS NULL;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    job_id != <span class="string">'IT'</span> OR salary = <span class="number">12000</span>;</span><br><span class="line">    </span><br><span class="line">desc departments;</span><br><span class="line"></span><br><span class="line">SELECT DISTINCT</span><br><span class="line">    location_id</span><br><span class="line">FROM</span><br><span class="line">    departments;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql基础查询</title>
      <link href="/2020/06/21/Mysq%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2)/"/>
      <url>/2020/06/21/Mysq%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2)/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#基础查询语法">基础查询语法</a></li><li><a href="#使用指定的数据库">使用指定的数据库</a></li><li><a href="#查询表中的单个多个字段">查询表中的单个、多个字段</a></li><li><a href="#查询常量值">查询常量值</a></li><li><a href="#查询表达式">查询表达式</a></li><li><a href="#查询函数">查询函数</a></li><li><a href="#给字段取别名">给字段取别名</a></li><li><a href="#去重distinct">去重（distinct）</a></li><li><a href="#号的作用">+号的作用</a></li><li><a href="#连接多个字段concat">连接多个字段（concat）</a></li><li><a href="#练习">练习</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="基础查询语法"><a href="#基础查询语法" class="headerlink" title="基础查询语法"></a>基础查询语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">SELECT </span><br><span class="line">    查询列表</span><br><span class="line">FROM</span><br><span class="line">    表名;</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、查询列表可以是：表中的字段、常量值、表达式、函数</span><br><span class="line"><span class="number">2</span>、查询的结果是一个虚拟的表格（类似于python中的视图）</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><hr><h2 id="使用指定的数据库"><a href="#使用指定的数据库" class="headerlink" title="使用指定的数据库"></a>使用指定的数据库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br></pre></td></tr></table></figure><hr><h2 id="查询表中的单个、多个字段"><a href="#查询表中的单个、多个字段" class="headerlink" title="查询表中的单个、多个字段"></a>查询表中的单个、多个字段</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- <span class="number">2.</span>查询表中的多个字段</span><br><span class="line">SELECT </span><br><span class="line">    last_name, salary, email</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- <span class="number">3.</span>查询表中所有字段</span><br><span class="line">-- 方法一：可以更改查询表的顺序</span><br><span class="line">SELECT </span><br><span class="line">    employee_id,</span><br><span class="line">    first_name,</span><br><span class="line">    last_name,</span><br><span class="line">    email,</span><br><span class="line">    phone_number,</span><br><span class="line">    job_id,</span><br><span class="line">    salary,</span><br><span class="line">    commission_pct,</span><br><span class="line">    manager_id,</span><br><span class="line">    department_id,</span><br><span class="line">    hiredate</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line">    </span><br><span class="line">-- 方法二：不可以更改查询表的顺序</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="查询常量值"><a href="#查询常量值" class="headerlink" title="查询常量值"></a>查询常量值</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="number">100</span>;</span><br><span class="line">SELECT <span class="string">'john'</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="查询表达式"><a href="#查询表达式" class="headerlink" title="查询表达式"></a>查询表达式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="number">100</span> % <span class="number">98</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="查询函数"><a href="#查询函数" class="headerlink" title="查询函数"></a>查询函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT version();</span><br></pre></td></tr></table></figure><hr><h2 id="给字段取别名"><a href="#给字段取别名" class="headerlink" title="给字段取别名"></a>给字段取别名</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"><span class="number">1</span>、便于理解</span><br><span class="line"><span class="number">2</span>、如果要查询的字段有重名的情况，使用别名可以区分开来</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 方式一：使用As </span><br><span class="line">SELECT <span class="number">100</span> % <span class="number">98</span> AS 结果;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    last_name AS 姓, first_name AS 名</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- 方式二：使用空格</span><br><span class="line">SELECT </span><br><span class="line">    last_name 姓, first_name 名</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- 案例：查询salary，显示列名的别名为out put（当别名中有空格等特殊字符，则别名需要用引号，否则会报错）</span><br><span class="line">SELECT </span><br><span class="line">    salary AS <span class="string">"out put"</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="去重（distinct）"><a href="#去重（distinct）" class="headerlink" title="去重（distinct）"></a>去重（distinct）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 案例：查询员工表中涉及到的所有的部门编号</span><br><span class="line">SELECT DISTINCT</span><br><span class="line">    department_id</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="号的作用"><a href="#号的作用" class="headerlink" title="+号的作用"></a>+号的作用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">python中+号：</span><br><span class="line"><span class="number">1</span>、运算符，两个操作数都为数值型</span><br><span class="line"><span class="number">2</span>、连接符，只要有一个操作数为字符串</span><br><span class="line"></span><br><span class="line">mysql中的+号：</span><br><span class="line">仅仅只有一个功能：运算符</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 两个操作数都为数值型，则做加法运算</span><br><span class="line">SELECT <span class="number">100</span> + <span class="number">90</span>; </span><br><span class="line"></span><br><span class="line">-- 其中一方为字符型，试图将字符型转换成数值型，如果转换成功，则继续做加法运算</span><br><span class="line">SELECT <span class="string">"123"</span> + <span class="number">90</span>; </span><br><span class="line"></span><br><span class="line">-- 如果转换失败，则将字符串转换为<span class="number">0</span></span><br><span class="line">SELECT <span class="string">"john"</span> + <span class="number">90</span>; </span><br><span class="line"></span><br><span class="line">-- 只要一方为null，结果肯定为null </span><br><span class="line">SELECT null + <span class="number">10</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="连接多个字段（concat）"><a href="#连接多个字段（concat）" class="headerlink" title="连接多个字段（concat）"></a>连接多个字段（concat）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- 案例：查询员工名和姓连接成一个字段，并显示为 姓名</span><br><span class="line">SELECT </span><br><span class="line">    CONCAT(last_name, first_name) AS 姓名</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">-- 如果连接的字段中有值为null（ifnull）</span><br><span class="line">SELECT </span><br><span class="line">    IFNULL(commission_pct, <span class="number">0</span>) AS 奖金率, </span><br><span class="line">    commission_pct</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    last_name, job_id, salary AS sal</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line">    </span><br><span class="line">SELECT </span><br><span class="line">    employee_id, last_name, salary * <span class="number">12</span> AS <span class="string">'ANNUAL SALARY'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line">    </span><br><span class="line">DESC departments;</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    departments;</span><br><span class="line">    </span><br><span class="line">SELECT DISTINCT</span><br><span class="line">    job_id</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    CONCAT(employee_id,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            first_name,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            last_name,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            email,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            phone_number,</span><br><span class="line">            <span class="string">','</span>,</span><br><span class="line">            IFNULL(commission_pct, <span class="number">0</span>)) AS OUT_PUT</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDFS高可用(HA)理论概述</title>
      <link href="/2020/06/19/HDFS%E9%AB%98%E5%8F%AF%E7%94%A8%E7%90%86%E8%AE%BA%E6%A6%82%E8%BF%B0/"/>
      <url>/2020/06/19/HDFS%E9%AB%98%E5%8F%AF%E7%94%A8%E7%90%86%E8%AE%BA%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#ha概述">HA概述</a></li><li><a href="#hdfs-ha的工作机制">HDFS HA的工作机制</a></li><li><a href="#hdfs-ha的工作要点">HDFS HA的工作要点</a></li><li><a href="#hdfs-ha自动故障转移工作机制">HDFS-HA自动故障转移工作机制</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="HA概述"><a href="#HA概述" class="headerlink" title="HA概述"></a>HA概述</h2><ul><li>所谓HA（High Available），即高可用（7*24小时不中断服务）。</li><li>实现高可用最关键的策略是<font color="red">消除单点故障</font>。HA严格来说应该分成各个组件的HA机制：HDFS的HA和YARN的HA。</li><li>在老版本Hadoop2.0之前，在HDFS集群中<code>NameNode存在单点故障（SPOF）</code>。</li><li>NameNode主要在以下两个方面影响HDFS集群：<ol><li><em>NameNode机器发生意外，如宕机，集群将无法使用，直到管理员重启。</em></li><li><em>NameNode机器需要升级，包括软件、硬件升级，此时集群也将无法使用。</em></li></ol></li><li>HDFS HA功能通过配置<code>Active/Standby</code>两个NameNodes实现在集群中对NameNode的<code>热备</code>来解决上述问题。如果出现故障，如机器崩溃或机器需要升级维护，这时可通过此种方式将NameNode很快的切换到另外一台机器。</li></ul><hr><h2 id="HDFS-HA的工作机制"><a href="#HDFS-HA的工作机制" class="headerlink" title="HDFS HA的工作机制"></a>HDFS HA的工作机制</h2><p>&#8195;&#8195;通过双NameNode消除单点故障。</p><hr><h2 id="HDFS-HA的工作要点"><a href="#HDFS-HA的工作要点" class="headerlink" title="HDFS HA的工作要点"></a>HDFS HA的工作要点</h2><blockquote><p><strong>元数据管理方式需要改变：</strong><br>内存中各自保存一份元数据；Edits日志只有<code>active状态</code>的NameNode节点可以做<code>写</code>操作；两个NameNode都可以读取Edits；共享的Edits放在一个共享存储中管理（qjournal和NFS两个主流实现）。</p><p><strong>需要一个状态管理功能模块：</strong><br><font color="red">实现了一个zkfailover，常驻在每一个namenode所在的节点，每一个zkfailover负责监控自己所在NameNode节点，利用zk进行状态标识，当需要进行状态切换时，由zkfailover来负责切换，切换时需要防止brain split现象的发生。</font></p><p><strong>必须保证两个NameNode之间能够ssh无密码登录。</strong></p><p><strong>隔离（Fence），即同一时刻仅仅有一个NameNode对外提供服务。</strong></p></blockquote><hr><h2 id="HDFS-HA自动故障转移工作机制"><a href="#HDFS-HA自动故障转移工作机制" class="headerlink" title="HDFS-HA自动故障转移工作机制"></a>HDFS-HA自动故障转移工作机制</h2><p>&#8195;&#8195;自动故障转移为HDFS部署增加了两个新组件：<code>ZooKeeper</code>和<code>ZKFailoverController（ZKFC）</code>进程。<br>&#8195;&#8195;<font color="red">ZooKeeper是维护少量协调数据，通知客户端这些数据的改变和监视客户端故障的高可用服务。</font> HA的自动故障转移依赖于ZooKeeper的以下功能：  </p><ol><li><strong>故障检测：</strong> 集群中的每个NameNode在ZooKeeper中维护了一个持久会话，如果机器崩溃，ZooKeeper中的会话将终止，ZooKeeper通知另一个NameNode需要触发故障转移。  </li><li><strong>现役NameNode选择：</strong> ZooKeeper提供了一个简单的机制用于唯一的选择一个节点为active状态。如果目前现役NameNode崩溃，另一个节点可能从ZooKeeper获得特殊的<code>排外锁以表明它应该成为现役NameNode。</code><br></li></ol><p>&#8195;&#8195;ZKFC是自动故障转移中的另一个新组件，是ZooKeeper的客户端，也监视和管理NameNode的状态。每个运行NameNode的主机也运行了一个ZKFC进程，ZKFC负责：</p><ol><li><strong>健康监测：</strong> ZKFC使用一个健康检查命令定期地ping与之在相同主机的NameNode，只要该NameNode及时地回复健康状态，ZKFC认为该节点是健康的。如果该节点崩溃，冻结或进入不健康状态，健康监测器标识该节点为非健康的。<br></li><li><strong>ZooKeeper会话管理：</strong> 当本地NameNode是健康的，ZKFC保持一个在ZooKeeper中打开的会话。如果本地NameNode处于active状态，ZKFC也保持一个<code>特殊的znode锁</code>，该锁使用了ZooKeeper对短暂节点的支持，如果会话终止，锁节点将自动删除。<br></li><li><strong>基于ZooKeeper的选择：</strong> 如果本地NameNode是健康的，且ZKFC发现没有其它的节点当前持有znode锁，它将为自己获取该锁。如果成功，则它已经赢得了选择，并负责运行故障转移进程以使它的本地NameNode为Active。故障转移进程与前面描述的手动故障转移相似，首先如果必要保护之前的现役NameNode，然后本地NameNode转换为Active状态。<br><br>&#8195;&#8195;HDFS-HA故障转移机制如下图所示：<img src="/2020/06/19/HDFS%E9%AB%98%E5%8F%AF%E7%94%A8%E7%90%86%E8%AE%BA%E6%A6%82%E8%BF%B0/HDFS-HA%E6%95%85%E9%9A%9C%E8%BD%AC%E7%A7%BB%E6%9C%BA%E5%88%B6.png" alt="HDFS-HA故障转移机制"></li></ol><blockquote><p>说明：上述内容是我学习b站<a href="https://space.bilibili.com/302417610?spm_id_from=333.788.b_765f7570696e666f.2" target="_blank" rel="noopener">尚硅谷官方</a>分享的公开课<a href="https://www.bilibili.com/video/BV1cW411r7c5" target="_blank" rel="noopener">尚硅谷Hadoop教程(hadoop框架精讲)</a>总结得出。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql常见函数</title>
      <link href="/2020/04/11/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0)/"/>
      <url>/2020/04/11/Mysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80(%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0)/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#常见函数汇总">常见函数汇总</a></li><li><a href="#字符函数">字符函数</a><ul><li><a href="#length获取参数值的字节个数">length（获取参数值的字节个数）</a></li><li><a href="#concat拼接字符串">concat（拼接字符串）</a></li><li><a href="#upper转化为大写lower转化为小写">upper（转化为大写）、lower（转化为小写）</a></li><li><a href="#substrsubstring字符串截取">substr、substring（字符串截取）</a></li><li><a href="#instr返回子串第一次出现的索引如果找不到返回0">instr（返回子串第一次出现的索引，如果找不到返回0）</a></li><li><a href="#trim-去掉前尾相应的字符">trim （去掉前、尾相应的字符）</a></li><li><a href="#lpad用指定的字符实现左填充指定的长度不是字节数">lpad（用指定的字符实现左填充指定的长度（不是字节数））</a></li><li><a href="#rpad用指定的字符实现右填充指定的长度不是字节数">rpad（用指定的字符实现右填充指定的长度（不是字节数））</a></li><li><a href="#replace替换">replace（替换）</a></li></ul></li><li><a href="#数学函数">数学函数</a><ul><li><a href="#round四舍五入">round（四舍五入）</a></li><li><a href="#ceil向上取整返回该参数的最小整数">ceil（向上取整，返回&gt;=该参数的最小整数）</a></li><li><a href="#floor向下取整返回该参数的最大整数">floor（向下取整，返回&lt;=该参数的最大整数）</a></li><li><a href="#truncate截断">truncate（截断）</a></li><li><a href="#mod取余">mod（取余）</a></li></ul></li><li><a href="#日期函数">日期函数</a><ul><li><a href="#now返回当前系统日期时间">now（返回当前系统日期+时间）</a></li><li><a href="#curdate返回当前系统日期不包含时间">curdate（返回当前系统日期，不包含时间）</a></li><li><a href="#curtime返回当前时间不包含日期">curtime（返回当前时间，不包含日期）</a></li><li><a href="#指获取指定的部分年月日小时分钟秒">指获取指定的部分，年、月、日、小时、分钟、秒</a></li><li><a href="#str_to_date将字符通过指定的格式转换为日期">str_to_date（将字符通过指定的格式转换为日期）</a></li><li><a href="#data_format将日期转化为字符">data_format（将日期转化为字符）</a></li></ul></li><li><a href="#其它函数">其它函数</a></li><li><a href="#流程控制函数">流程控制函数</a><ul><li><a href="#if-函数if-else-的效果">if 函数（if else 的效果）</a></li><li><a href="#case函数的使用一switch-case-的效果">case函数的使用一（switch case 的效果）</a></li><li><a href="#case-函数的使用二类似于-多重if">case 函数的使用二（类似于 多重if）</a></li></ul></li><li><a href="#练习">练习</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="常见函数汇总"><a href="#常见函数汇总" class="headerlink" title="常见函数汇总"></a>常见函数汇总</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">概念：类似于python中的方法，将一组逻辑语句封装在方法体中，对外暴露方法名</span><br><span class="line"></span><br><span class="line">好处：</span><br><span class="line"><span class="number">1</span>、隐藏了实现的具体细节</span><br><span class="line"><span class="number">2</span>、提高代码的重用性</span><br><span class="line"></span><br><span class="line">调用：</span><br><span class="line">SELECT </span><br><span class="line">    函数名(实参列表)</span><br><span class="line">[FROM</span><br><span class="line">    表];</span><br><span class="line">    </span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>、叫什么（函数名）</span><br><span class="line"><span class="number">2</span>、干什么（函数功能）</span><br><span class="line"></span><br><span class="line">分类：</span><br><span class="line"><span class="number">1</span>、单行函数，如：cancat、length、ifnull等</span><br><span class="line"><span class="number">2</span>、分组函数（功能做统计使用，又称为统计函数、聚合函数、组函数）</span><br><span class="line"></span><br><span class="line">常见函数：</span><br><span class="line">字符函数：</span><br><span class="line">        length</span><br><span class="line">        concat</span><br><span class="line">        substr</span><br><span class="line">        instr</span><br><span class="line">        trim</span><br><span class="line">        upper</span><br><span class="line">        lower</span><br><span class="line">        lpad</span><br><span class="line">        rpad</span><br><span class="line">        replace</span><br><span class="line">        </span><br><span class="line">        数学函数：</span><br><span class="line">        round</span><br><span class="line">        ceil</span><br><span class="line">        floor</span><br><span class="line">        truncate</span><br><span class="line">        mod</span><br><span class="line">        </span><br><span class="line">        日期函数：</span><br><span class="line">        now</span><br><span class="line">        curdate</span><br><span class="line">        curtime</span><br><span class="line">        year</span><br><span class="line">        month</span><br><span class="line">        monthname</span><br><span class="line">        day</span><br><span class="line">        hour</span><br><span class="line">        minute</span><br><span class="line">        second</span><br><span class="line">        str_to_date</span><br><span class="line">        date_format</span><br><span class="line">datediff</span><br><span class="line">        </span><br><span class="line">        其它函数：</span><br><span class="line">        version</span><br><span class="line">        database</span><br><span class="line">        user</span><br><span class="line">password</span><br><span class="line">MD5</span><br><span class="line">        </span><br><span class="line">        控制函数：</span><br><span class="line">        <span class="keyword">if</span> </span><br><span class="line">        case</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><hr><h2 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h2><h3 id="length（获取参数值的字节个数）"><a href="#length（获取参数值的字节个数）" class="headerlink" title="length（获取参数值的字节个数）"></a>length（获取参数值的字节个数）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- length  获取参数值的字节个数</span><br><span class="line">SELECT length(<span class="string">'john'</span>);</span><br><span class="line">SELECT length(<span class="string">'张三丰'</span>);</span><br><span class="line"></span><br><span class="line">-- utf8一个字母占一个字节，一个汉字占<span class="number">3</span>个字节</span><br><span class="line">SHOW VARIABLES LIKE <span class="string">'%char%'</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="concat（拼接字符串）"><a href="#concat（拼接字符串）" class="headerlink" title="concat（拼接字符串）"></a>concat（拼接字符串）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    CONCAT(last_name, <span class="string">'_'</span>, first_name) AS <span class="string">'姓名'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h3 id="upper（转化为大写）、lower（转化为小写）"><a href="#upper（转化为大写）、lower（转化为小写）" class="headerlink" title="upper（转化为大写）、lower（转化为小写）"></a>upper（转化为大写）、lower（转化为小写）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT UPPER(<span class="string">'john'</span>);</span><br><span class="line"></span><br><span class="line">SELECT LOWER(<span class="string">'joHn'</span>);</span><br><span class="line"></span><br><span class="line">-- 示例：将姓变大写，名变小写，然后拼接</span><br><span class="line">SELECT </span><br><span class="line">    CONCAT(UPPER(last_name), <span class="string">'_'</span>, LOWER(first_name)) AS <span class="string">'姓名'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h3 id="substr、substring（字符串截取）"><a href="#substr、substring（字符串截取）" class="headerlink" title="substr、substring（字符串截取）"></a>substr、substring（字符串截取）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- mysql中索引从<span class="number">1</span>开始</span><br><span class="line"></span><br><span class="line">-- 截取从指定索引处后面的所有字符</span><br><span class="line">SELECT substr(<span class="string">'李莫愁爱上了陆展元'</span>, <span class="number">7</span>) out_put;</span><br><span class="line"></span><br><span class="line">-- 截取从指定索引处指定字符长度的字符</span><br><span class="line">SELECT substr(<span class="string">'李莫愁爱上了陆展元'</span>, <span class="number">1</span>, <span class="number">3</span>) out_put;</span><br><span class="line"></span><br><span class="line">-- 案例：姓名中首字母大写，其它字符小写然后用_拼接，显示出来</span><br><span class="line">SELECT </span><br><span class="line">    CONCAT(UPPER(SUBSTR(last_name, <span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">            <span class="string">'_'</span>,</span><br><span class="line">            LOWER(SUBSTR(last_name, <span class="number">2</span>))) AS <span class="string">'姓名'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h3 id="instr（返回子串第一次出现的索引，如果找不到返回0）"><a href="#instr（返回子串第一次出现的索引，如果找不到返回0）" class="headerlink" title="instr（返回子串第一次出现的索引，如果找不到返回0）"></a>instr（返回子串第一次出现的索引，如果找不到返回0）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    INSTR(<span class="string">'杨不悔爱上了殷六侠'</span>,</span><br><span class="line">            <span class="string">'殷六侠'</span>) AS out_put;</span><br></pre></td></tr></table></figure><hr><h3 id="trim-（去掉前、尾相应的字符）"><a href="#trim-（去掉前、尾相应的字符）" class="headerlink" title="trim （去掉前、尾相应的字符）"></a>trim （去掉前、尾相应的字符）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT LENGTH(TRIM(<span class="string">'   张翠山    '</span>)) AS out_put;  <span class="comment"># 默认去掉空格</span></span><br><span class="line"></span><br><span class="line">SELECT TRIM(<span class="string">'a'</span> FROM <span class="string">'aaaaaaaaaaaaaaaaaa张aaaaa翠山aaaaaaaaaaaaaa'</span>) AS out_put;</span><br></pre></td></tr></table></figure><hr><h3 id="lpad（用指定的字符实现左填充指定的长度（不是字节数））"><a href="#lpad（用指定的字符实现左填充指定的长度（不是字节数））" class="headerlink" title="lpad（用指定的字符实现左填充指定的长度（不是字节数））"></a>lpad（用指定的字符实现左填充指定的长度（不是字节数））</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- lpad 用指定的字符实现左填充指定的长度（不是字节数）</span><br><span class="line">SELECT LPAD(<span class="string">'殷素素'</span>, <span class="number">10</span>, <span class="string">'*'</span>) AS out_put;</span><br><span class="line"></span><br><span class="line">-- 如果给定的字符数超过了要求的字符数，就会从右边截断到相应的字符数</span><br><span class="line">SELECT LPAD(<span class="string">'殷素素'</span>, <span class="number">2</span>, <span class="string">'*'</span>) AS out_put;</span><br></pre></td></tr></table></figure><hr><h3 id="rpad（用指定的字符实现右填充指定的长度（不是字节数））"><a href="#rpad（用指定的字符实现右填充指定的长度（不是字节数））" class="headerlink" title="rpad（用指定的字符实现右填充指定的长度（不是字节数））"></a>rpad（用指定的字符实现右填充指定的长度（不是字节数））</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- rpad 用指定的字符实现右填充指定的长度（不是字节数）</span><br><span class="line">SELECT RPAD(<span class="string">'殷素素'</span>, <span class="number">10</span>, <span class="string">'*'</span>) AS out_put;</span><br><span class="line"></span><br><span class="line">SELECT RPAD(<span class="string">'殷素素'</span>, <span class="number">2</span>, <span class="string">'*'</span>) AS out_put;</span><br></pre></td></tr></table></figure><hr><h3 id="replace（替换）"><a href="#replace（替换）" class="headerlink" title="replace（替换）"></a>replace（替换）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    REPLACE(<span class="string">'张无忌爱上了周芷若'</span>,</span><br><span class="line">        <span class="string">'周芷若'</span>,</span><br><span class="line">        <span class="string">'赵敏'</span>) AS out_put;</span><br></pre></td></tr></table></figure><hr><h2 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h2><h3 id="round（四舍五入）"><a href="#round（四舍五入）" class="headerlink" title="round（四舍五入）"></a>round（四舍五入）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT ROUND(<span class="number">1.45</span>);</span><br><span class="line"></span><br><span class="line">SELECT ROUND(- <span class="number">1.55</span>);</span><br><span class="line"></span><br><span class="line">SELECT ROUND(<span class="number">1.567</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="ceil（向上取整，返回-gt-该参数的最小整数）"><a href="#ceil（向上取整，返回-gt-该参数的最小整数）" class="headerlink" title="ceil（向上取整，返回&gt;=该参数的最小整数）"></a>ceil（向上取整，返回&gt;=该参数的最小整数）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- ceil 向上取整，返回&gt;=该参数的最小整数</span><br><span class="line">SELECT CEIL(<span class="number">1.45</span>);</span><br><span class="line"></span><br><span class="line">SELECT CEIL(- <span class="number">1.65</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="floor（向下取整，返回-lt-该参数的最大整数）"><a href="#floor（向下取整，返回-lt-该参数的最大整数）" class="headerlink" title="floor（向下取整，返回&lt;=该参数的最大整数）"></a>floor（向下取整，返回&lt;=该参数的最大整数）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- floor 向下取整，返回&lt;=该参数的最大整数</span><br><span class="line">SELECT floor(<span class="number">-9.99</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="truncate（截断）"><a href="#truncate（截断）" class="headerlink" title="truncate（截断）"></a>truncate（截断）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- truncate 截断</span><br><span class="line">SELECT TRUNCATE(<span class="number">1.69999</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="mod（取余）"><a href="#mod（取余）" class="headerlink" title="mod（取余）"></a>mod（取余）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- mod 取余</span><br><span class="line">-- mod(a, b): a-a/b*b</span><br><span class="line">SELECT MOD(<span class="number">-10</span>, <span class="number">-3</span>);</span><br><span class="line"></span><br><span class="line">SELECT <span class="number">10</span> % <span class="number">3</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><h3 id="now（返回当前系统日期-时间）"><a href="#now（返回当前系统日期-时间）" class="headerlink" title="now（返回当前系统日期+时间）"></a>now（返回当前系统日期+时间）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW();</span><br></pre></td></tr></table></figure><hr><h3 id="curdate（返回当前系统日期，不包含时间）"><a href="#curdate（返回当前系统日期，不包含时间）" class="headerlink" title="curdate（返回当前系统日期，不包含时间）"></a>curdate（返回当前系统日期，不包含时间）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURDATE();</span><br></pre></td></tr></table></figure><hr><h3 id="curtime（返回当前时间，不包含日期）"><a href="#curtime（返回当前时间，不包含日期）" class="headerlink" title="curtime（返回当前时间，不包含日期）"></a>curtime（返回当前时间，不包含日期）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- curtime 返回当前时间，不包含日期</span><br><span class="line">SELECT CURTIME();</span><br></pre></td></tr></table></figure><hr><h3 id="指获取指定的部分，年、月、日、小时、分钟、秒"><a href="#指获取指定的部分，年、月、日、小时、分钟、秒" class="headerlink" title="指获取指定的部分，年、月、日、小时、分钟、秒"></a>指获取指定的部分，年、月、日、小时、分钟、秒</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT YEAR(NOW()) AS 年;</span><br><span class="line"></span><br><span class="line">SELECT year(<span class="string">'1988-1-1'</span>) <span class="keyword">as</span> 年;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    YEAR(hiredate)</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">SELECT MONTH(NOW()) AS 月;</span><br><span class="line">SELECT MONTHNAME(NOW()) AS 月;</span><br></pre></td></tr></table></figure><hr><h3 id="str-to-date（将字符通过指定的格式转换为日期）"><a href="#str-to-date（将字符通过指定的格式转换为日期）" class="headerlink" title="str_to_date（将字符通过指定的格式转换为日期）"></a>str_to_date（将字符通过指定的格式转换为日期）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT STR_TO_DATE(<span class="string">'1988-3-2'</span>, <span class="string">'%Y-%c-%d'</span>) AS out_put;</span><br><span class="line"></span><br><span class="line">-- 查询入职信息为<span class="number">1992</span><span class="number">-4</span><span class="number">-3</span>的员工信息</span><br><span class="line">SELECT </span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    hiredate = STR_TO_DATE(<span class="string">'4-3 1992'</span>, <span class="string">'%c-%d %Y'</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="data-format（将日期转化为字符）"><a href="#data-format（将日期转化为字符）" class="headerlink" title="data_format（将日期转化为字符）"></a>data_format（将日期转化为字符）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATE_FORMAT(NOW(), <span class="string">'%y年%m月%d日'</span>) AS out_put;</span><br><span class="line"></span><br><span class="line">-- 查询有奖金的员工名和入职日期（xx月/xx日 xx年）</span><br><span class="line">SELECT </span><br><span class="line">    last_name AS <span class="string">'员工名'</span>,</span><br><span class="line">    DATE_FORMAT(hiredate, <span class="string">'%m月/%d日 %Y年'</span>) AS <span class="string">'入职日期'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    commission_pct IS NOT NULL;</span><br></pre></td></tr></table></figure><hr><h2 id="其它函数"><a href="#其它函数" class="headerlink" title="其它函数"></a>其它函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br><span class="line"></span><br><span class="line">SELECT DATABASE();</span><br><span class="line"></span><br><span class="line">SELECT USER();</span><br></pre></td></tr></table></figure><hr><h2 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h2><h3 id="if-函数（if-else-的效果）"><a href="#if-函数（if-else-的效果）" class="headerlink" title="if 函数（if else 的效果）"></a>if 函数（if else 的效果）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT IF(<span class="number">10</span> &lt; <span class="number">5</span>, <span class="string">'大'</span>, <span class="string">'小'</span>);</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    last_name,</span><br><span class="line">    commission_pct,</span><br><span class="line">    IF(commission_pct IS NULL,</span><br><span class="line">        <span class="string">'没奖金'</span>,</span><br><span class="line">        <span class="string">'有奖金'</span>) AS 备注</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h3 id="case函数的使用一（switch-case-的效果）"><a href="#case函数的使用一（switch-case-的效果）" class="headerlink" title="case函数的使用一（switch case 的效果）"></a>case函数的使用一（switch case 的效果）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">java中：</span><br><span class="line">switch(变量或表达式)&#123;</span><br><span class="line">case 常量<span class="number">1</span>：语句<span class="number">1</span>; <span class="keyword">break</span>;</span><br><span class="line">...</span><br><span class="line">default:语句n; <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysql中：</span><br><span class="line">case 要判断的字段或表达式</span><br><span class="line">when 常量<span class="number">1</span> then 要显示的值<span class="number">1</span>或语句<span class="number">1</span>;（如果是值就不用加;，如果是表达式就需要加;）</span><br><span class="line">when 常量<span class="number">2</span> then 要显示的值<span class="number">2</span>或语句<span class="number">2</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">else</span> 要显示的值n或语句n;</span><br><span class="line">end</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">/*案例：查询员工的工资，要求：</span><br><span class="line">部门号=<span class="number">30</span>，显示的工资为<span class="number">1.1</span>倍</span><br><span class="line">部门号=<span class="number">40</span>，显示的工资为<span class="number">1.2</span>倍</span><br><span class="line">部门号=<span class="number">50</span>，显示的工资为<span class="number">1.3</span>倍</span><br><span class="line">其他部门，显示的工资为原工资</span><br><span class="line">*/</span><br><span class="line">SELECT </span><br><span class="line">    salary AS <span class="string">'原始工资'</span>,</span><br><span class="line">    department_id,</span><br><span class="line">    CASE department_id</span><br><span class="line">        WHEN <span class="number">30</span> THEN salary * <span class="number">1.1</span></span><br><span class="line">        WHEN <span class="number">40</span> THEN salary * <span class="number">1.2</span></span><br><span class="line">        WHEN <span class="number">50</span> THEN salary * <span class="number">1.3</span></span><br><span class="line">        ELSE salary</span><br><span class="line">    END AS <span class="string">'新工资'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h3 id="case-函数的使用二（类似于-多重if）"><a href="#case-函数的使用二（类似于-多重if）" class="headerlink" title="case 函数的使用二（类似于 多重if）"></a>case 函数的使用二（类似于 多重if）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">case </span><br><span class="line">when 条件<span class="number">1</span> then 要显示的值<span class="number">1</span>或者语句<span class="number">1</span>;</span><br><span class="line">when 条件<span class="number">2</span> then 要显示的值<span class="number">2</span>或者语句<span class="number">2</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">else</span> 要显示的值或者语句;</span><br><span class="line">end</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 案例：查询员工的工资的情况</span><br><span class="line">/*</span><br><span class="line">如果工资&gt;<span class="number">20000</span>,显示A级别</span><br><span class="line">如果工资&gt;<span class="number">15000</span>,显示B级别</span><br><span class="line">如果工资&gt;<span class="number">10000</span>,显示C级别</span><br><span class="line">否则，显示D级别</span><br><span class="line">*/</span><br><span class="line">SELECT </span><br><span class="line">    salary AS <span class="string">'工资'</span>,</span><br><span class="line">    CASE</span><br><span class="line">        WHEN salary &gt; <span class="number">20000</span> THEN <span class="string">'A'</span></span><br><span class="line">        WHEN salary &gt; <span class="number">15000</span> THEN <span class="string">'B'</span></span><br><span class="line">        WHEN salary &gt; <span class="number">10000</span> THEN <span class="string">'C'</span></span><br><span class="line">        ELSE <span class="string">'D'</span></span><br><span class="line">    END AS <span class="string">'工资等级'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br></pre></td></tr></table></figure><hr><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW();</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    employee_id AS <span class="string">'员工号'</span>,</span><br><span class="line">    last_name AS <span class="string">'姓名'</span>,</span><br><span class="line">    salary AS <span class="string">'工资'</span>,</span><br><span class="line">    salary * <span class="number">1.2</span> AS <span class="string">'NEW salary'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    last_name, LENGTH(last_name) AS <span class="string">'名字的长度'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY SUBSTR(last_name, <span class="number">1</span>, <span class="number">1</span>) ASC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    CONCAT(last_name,</span><br><span class="line">            <span class="string">' earns '</span>,</span><br><span class="line">            salary,</span><br><span class="line">            <span class="string">' monthly but wants '</span>,</span><br><span class="line">            salary * <span class="number">3</span>) AS <span class="string">'dream salary'</span></span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    last_name,</span><br><span class="line">    job_id AS <span class="string">'job'</span>,</span><br><span class="line">    CASE job_id</span><br><span class="line">        WHEN <span class="string">'AD_PRES'</span> THEN <span class="string">'A'</span></span><br><span class="line">        WHEN <span class="string">'ST_MAN'</span> THEN <span class="string">'B'</span></span><br><span class="line">        WHEN <span class="string">'IT_PROG'</span> THEN <span class="string">'C'</span></span><br><span class="line">        WHEN <span class="string">'SA_PRE'</span> THEN <span class="string">'D'</span></span><br><span class="line">        WHEN <span class="string">'ST_CLERK'</span> THEN <span class="string">'E'</span></span><br><span class="line">        ELSE job_id</span><br><span class="line">    END AS <span class="string">'grade'</span></span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    job_id = <span class="string">'AD_PRES'</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Xshell命令大全</title>
      <link href="/2020/03/27/Xsell%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"/>
      <url>/2020/03/27/Xsell%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#xshell命令大全">Xshell命令大全</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="Xshell命令大全"><a href="#Xshell命令大全" class="headerlink" title="Xshell命令大全"></a>Xshell命令大全</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">***********************************常用操作*********************************</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文本复制:Ctrl+Insert</span><br><span class="line">//文本粘贴:Shift+Insert</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件复制：</span><br><span class="line">cp file1 file1.bak --把文件file1复制为新文件file1.bak</span><br><span class="line">cp file1 /home/bin --把file1文件从当前位置复制到/home/bin目录下</span><br><span class="line">cp *   /home/bin   --把当前文件下所有文件复制一份到/home/bin目录下</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件移动</span><br><span class="line">mv * /home/bin   --把当前目录下的所有文件移动到/home/bin目录下</span><br><span class="line">mv file1 /home/bin --把file1文件从当前位置下移动到/home/bin目录下 </span><br><span class="line"> </span><br><span class="line">//文件重命名</span><br><span class="line">mv file1 file2  --把file1名称改为file2</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件列表</span><br><span class="line">ls          --列出当前目录下所有文件名</span><br><span class="line">ls -l       --列出当前目录下所有文件的一个长列表</span><br><span class="line">ls -la      --列出当前目录下所有文件的一个长列表，包括以句点开头的隐藏文件</span><br><span class="line">ls a*       --列出当前目录下以字母a开头的所有文件</span><br><span class="line">ls -l *.doc --列出当前目录下以.doc结尾的所有文件</span><br><span class="line"> </span><br><span class="line">find -name *.rpm 在当前目录中查找rpm包</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件删除：</span><br><span class="line">rm file1,file2,...    --删除当前目录文件file1,file2等</span><br><span class="line">rm *   --删除当前目录下所有非隐藏文件，不删除目录，除非指定了-r（递归参数）</span><br><span class="line">rm -rf /home 删除home目录及它所包含的所有内容</span><br><span class="line">rm -r /home 删除home目录，会让你确认是否删除目录下的文件</span><br><span class="line">rm -i a* </span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//文件上传：rz 回车</span><br><span class="line">//文件下载：sz file1</span><br><span class="line">//提示：如果连接linux虚拟机上，rz命令不起作用，需要安装一个rz和sz的程序：yum install -y lrzsz</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//进入文件</span><br><span class="line">cd ../  或者  cd /      --进入根目录下</span><br><span class="line">cd ..                   --当前目录的上一级目录</span><br><span class="line">cd ../..                --切换到上两级目录</span><br><span class="line">cd ~                    --切换用户目录，如果是root用户，则切换到/root下</span><br><span class="line">cd /home/bin            --进入当前目录的/home/bin目录下</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//建立目录</span><br><span class="line">mkdir <span class="number">001</span>  --在当前目录下建立<span class="number">001</span>目录</span><br><span class="line">mkdir -p /<span class="number">001</span>/<span class="number">002</span>/<span class="number">003</span>  --在当前目录下嵌套建立指定目录(要带上当前目录)</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//创建文件</span><br><span class="line">touch a.html --在当前目录创建一个空的a.html文件</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//查看文件内容</span><br><span class="line">more file1 --查看file1文件的内容，支持分页显示</span><br><span class="line">less file1 --查看file1文件的内容</span><br><span class="line">cat file1  --显示file1文件的内容</span><br><span class="line">tail -f file1   --查看file1的内容</span><br><span class="line">tail <span class="number">-100</span> file1 --查看file1的后<span class="number">100</span>行内容</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//搜索文件的内容</span><br><span class="line">grep aaa /home/bin/file1 --在file1文件中查询包含aaa的所有行</span><br><span class="line"> </span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//窗口切换+全屏</span><br><span class="line">Alt+<span class="number">1</span>     --切换窗口<span class="number">1</span></span><br><span class="line">Alt+<span class="number">2</span>     --切换窗口<span class="number">2</span></span><br><span class="line">Alt+Enter --全屏</span><br><span class="line"> </span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//编辑文件</span><br><span class="line">vi file1 --编辑file1文件内容</span><br><span class="line"> </span><br><span class="line">esc      --退出vi模式，跳入命令模式</span><br><span class="line"> </span><br><span class="line">:w       --保存，但不退出vi模式</span><br><span class="line">:w!      --强保存，但不退出vi模式</span><br><span class="line"> </span><br><span class="line">:wq      --保存，并退出vi</span><br><span class="line">:wq!     --强保存，并退出vi</span><br><span class="line">:q       --不保存，退出vi</span><br><span class="line">:q!      --不保存，强制退出vi</span><br><span class="line">:e!      --放弃所有修改，从上次保存文件开始再编辑</span><br><span class="line">Ctrl+Z   --将vi暂停（挂起）</span><br><span class="line">ctrl+c   --进入命令模式</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//查看当前的路径：pwd</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">//打包文件</span><br><span class="line">tar -cvf file1.zip file1   --将file1打包成file1.zip格式，此处可以打包成任意格式，即后缀可以为任意的，.aaa,.bbb,.zip,.tar 等</span><br><span class="line">//解包文件</span><br><span class="line">tar -xvf file1.zip         --解压包file1.zip,如果当前目录已经有文件了，覆盖原文件，否则正常显示</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">*********************************系统命令*******************************</span><br><span class="line">man rm  --显示rm命令的使用说明</span><br><span class="line">w       --显示登录用户的详细信息，类似于who</span><br><span class="line">who     --显示登录用户</span><br><span class="line">last    --显示最近登录的用户</span><br><span class="line"> </span><br><span class="line">date    --显示当前时期和时间</span><br><span class="line"> </span><br><span class="line">su      --切换root用户</span><br><span class="line">su zy   --切换到zy用户</span><br><span class="line"> </span><br><span class="line">clear   --清屏</span><br><span class="line"> </span><br><span class="line">free    --查看系统内存和Swap分区情况</span><br><span class="line"> </span><br><span class="line">reboot  --重启虚拟机</span><br><span class="line">shutdown -r now --停止服务后重启计算机</span><br><span class="line">shutdown -h now --停止服务后关闭计算机</span><br><span class="line">halt     -关闭计算机</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">tips:如果操作中有特殊的符号，比如()等，记得加\转义一下，如你要删除file1_(<span class="number">1</span>).html，要写成 rm file1_\(<span class="number">1</span>\).html</span><br></pre></td></tr></table></figure><blockquote><p>说明：转载自<a href="https://blog.csdn.net/u014074697/article/details/86241642" target="_blank" rel="noopener">博客</a>。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Xshell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Xshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hadoop完全分布式搭建</title>
      <link href="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/"/>
      <url>/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#准备工作">准备工作</a></li><li><a href="#安装vmwareworkstation-pro和centos-7">安装VMwareWorkstation Pro和CentOS 7</a></li><li><a href="#配置静态ip">配置静态IP</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>&#8195;&#8195;下载三个软件：<br></p><ul><li><a href="https://www.vmware.com/" target="_blank" rel="noopener">VMwareWorkstation Pro</a>，软件的版本看自己的需求，我用的是<code>VMwareWorkstation Pro 15</code>，在下载的时候可能要求登录，但是有不登录下载的<a href="https://blog.csdn.net/ITloser_cartridge/article/details/91347452" target="_blank" rel="noopener">方法</a>。<br></li><li><a href="https://www.centos.org/" target="_blank" rel="noopener">CentOS</a>，同样的下什么版本看个人需求，我用的是<code>CentOS-7-x86_64-DVD-1908</code>，官网下载可能下载的很慢，我们可以通过<a href="https://blog.csdn.net/qq_35500685/article/details/92803963?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">阿里云镜像</a>下载。<br></li><li><a href="https://www.netsarang.com/zh/xshell-download/" target="_blank" rel="noopener">XSHELL6</a>。在界面的右栏的<code>家庭和学校用户的免费许可证</code>下点击<code>免费授权页面</code>，注册信息然后便可以收到下载链接（你注册时使用的邮箱）。</li></ul><hr><h2 id="安装VMwareWorkstation-Pro和CentOS-7"><a href="#安装VMwareWorkstation-Pro和CentOS-7" class="headerlink" title="安装VMwareWorkstation Pro和CentOS 7"></a>安装VMwareWorkstation Pro和CentOS 7</h2><p>&#8195;&#8195;这里推荐一个写的非常详细的<a href="https://www.cnblogs.com/double-K/p/10952233.html" target="_blank" rel="noopener">博客</a>，按照该博主的教程，不会出现什么问题。</p><h2 id="配置静态IP"><a href="#配置静态IP" class="headerlink" title="配置静态IP"></a>配置静态IP</h2><p>&#8195;&#8195;这里需要注意的是<code>centOS</code>版本不同，配置的方法也有些不同，但是大致过程是一样的。以下是<code>centOS7</code>的静态IP配置方法。<br><br>&#8195;&#8195;按照<a href="https://www.cnblogs.com/double-K/p/10952233.html" target="_blank" rel="noopener">博客</a>的过程安装好虚拟机以后，开启虚拟机（用户名和密码是之前安装的时候所设置的用户名和密码），在桌面右键<code>打开终端</code>，在终端中输入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su root  <span class="comment"># 如果本身已经是root用户跳过该命令行，否则就要切换为root用户，密码就是之前安装时设置的root密码</span></span><br><span class="line">cd /etc/sysconfig/network-scripts/</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><p>然后就能看到如下所示：<img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/network-scripts.png" alt="network-scripts"><br>找到你的界面中类似<code>ifcfg- ens32</code>的文件（一般都在前面），然后通过一下命令打开编辑<code>ifcfg- ens32</code>文件：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ifcfg- ens32 <span class="comment"># vim 你的文件名</span></span><br></pre></td></tr></table></figure><p>就可以看到：<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/ifcfg-ens32.png" alt="ifcfg-ens32"><br>然后在英文输入法下，按<code>i</code>进入编辑模式（按下i之后光标由粗变细），通过<code>上下左右键</code>移动光标，将划红线部分，改为和上图一致，改好以后按下<code>ESC</code>，再输入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq  <span class="comment"># 注意前面的冒号是英文的冒号</span></span><br></pre></td></tr></table></figure><p>保存并退出。上图重要参数的意思参考如下：<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A.png" alt="参数解释"><br>接下来，来到<code>VMware Worksation</code>点击左上角的<code>编辑</code>并进入<code>虚拟网络编辑器</code>。<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C%E7%BC%96%E8%BE%91%E5%99%A8.png" alt="虚拟网络编辑器"><br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/VMnet8.png" alt="VMnet8"><br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/NAT.png" alt="NAT"><br>记住上图中 <code>子网IP</code>、<code>子网掩码</code>以及<code>网关</code>三个数据，然后进入编辑之前的<code>ifcfg- ens32</code>文件，在文件末尾追加信息如下：<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/IP%E5%9C%B0%E5%9D%80%E7%AD%89%E9%85%8D%E7%BD%AE.png" alt="IP地址等配置"><br>需要注意的是设置的<code>IPADDR</code>不要和网关一致并且要和<code>子网IP</code>一个网段。然后通过命令：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network.service</span><br></pre></td></tr></table></figure><p>重启网络设置。<br><br>再通过命令：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p>查看当前虚拟机的网络设置是否和设置的一致。<br><br>&#8195;&#8195;接下来关闭防火墙，不然虚拟机无法连接外网。<code>centOS7</code>中可以通过如下命令选择自行选择暂时关闭防火墙还是永久关闭防火墙。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld  <span class="comment"># 启动</span></span><br><span class="line">systemctl status firewalld  <span class="comment"># 查看状态</span></span><br><span class="line">systemctl disable firewalld  <span class="comment"># 停用</span></span><br><span class="line">systemctl stop firewalld  <span class="comment"># 禁用</span></span><br></pre></td></tr></table></figure><p>如果你是<code>centOS6</code>可以通过如下命令关闭防火墙。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop  <span class="comment"># 停用</span></span><br><span class="line">service iptables start  <span class="comment"># 启动</span></span><br><span class="line">service iptables restart  <span class="comment"># 重启</span></span><br><span class="line">service iptables status  <span class="comment"># 查看状态</span></span><br><span class="line">chkconfig iptables off  <span class="comment"># 禁用</span></span><br><span class="line">chkconfig iptables on  <span class="comment"># 永久开启</span></span><br></pre></td></tr></table></figure><p>完成这一步之后，虚拟器就应该可以ping通外网了。可以在虚拟机的命令行输入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure><p>如果出现如下结果，说明成功了：<br><img src="/2020/03/24/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/ping_baidu.png" alt="ping_baidu"><br>如果出现了可以ping通主机（就是你的电脑）,但是不能ping通外网，可以参考<a href="https://blog.csdn.net/Hi_alan/article/details/98633468?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-1" target="_blank" rel="noopener">博客</a>。</p>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git的安装与配置</title>
      <link href="/2020/02/23/git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/02/23/git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#目的">目的</a></li><li><a href="#git的下载和安装">git的下载和安装</a></li><li><a href="#git的基本工作流程">git的基本工作流程</a></li><li><a href="#gti的基础设置">gti的基础设置</a></li><li><a href="#说明">说明</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>通过git可以管理github项目代码，个人博客的搭建过程中也需要git的环境配置。</p><hr><h2 id="git的下载和安装"><a href="#git的下载和安装" class="headerlink" title="git的下载和安装"></a>git的下载和安装</h2><p>在<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git官网</a>下载对应版本的git软件：<br><img src="/2020/02/23/git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/git%E4%B8%8B%E8%BD%BD.png" alt="image"><br>然后双击安装即可，在选择<code>Adjusting your PATH environment</code>时选择<code>Use Git from Git Bash only</code>（其余默认，如果不想安装在默认路径，记得更改安装路径）。<br>若在桌面鼠标右键有<code>Git GUI Here</code>和<code>Git Bash Here</code>两个选项，则说明安装成功。</p><hr><h2 id="git的基本工作流程"><a href="#git的基本工作流程" class="headerlink" title="git的基本工作流程"></a>git的基本工作流程</h2><p>详细可见<a href="https://www.bilibili.com/video/av39189147?p=7" target="_blank" rel="noopener">视频教学</a>，分享者：<a href="https://space.bilibili.com/346057315?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">Fm-C</a>。<br><img src="/2020/02/23/git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/git%E6%93%8D%E4%BD%9C%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%E8%A1%8C.png" alt="git操作基本命令行"></p><hr><h2 id="gti的基础设置"><a href="#gti的基础设置" class="headerlink" title="gti的基础设置"></a>gti的基础设置</h2><p>在桌面新建一个文件夹（作为git工作路径），在该文件夹内鼠标右键选择<code>Git Bash Here</code>。<br>然后，在<code>Git Bash Here</code>界面通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="keyword">global</span> user.name <span class="string">'github用户名'</span></span><br><span class="line">git config --<span class="keyword">global</span> user.email <span class="string">'github绑定的邮箱'</span></span><br></pre></td></tr></table></figure><p>初始化你的个人信息， 你可以通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure><p>查看<code>user.name</code>和<code>user.email</code>两个属性是否设置成功。</p><hr><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><blockquote><p>上述内容是我学习b站<a href="https://space.bilibili.com/346057315?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">Fm-C</a>分享的公开课<a href="https://www.bilibili.com/video/av39189147?p=6" target="_blank" rel="noopener">Github使用教程-黑马程序员</a>总结得出。<br>该公开课讲解的非常详细，有兴趣的朋友可以去观看公开课视频！</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于hexo、github搭建个人博客</title>
      <link href="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#环境">环境</a></li><li><a href="#第一步安装notejs">第一步（安装note.js）</a></li><li><a href="#第二步安装cnpm">第二步（安装cnpm）</a></li><li><a href="#第三步安装hexo并初始化博客">第三步（安装hexo并初始化博客）</a></li><li><a href="#第四步新建一篇博文并上传到github">第四步（新建一篇博文并上传到github）</a></li><li><a href="#第五步设置主题">第五步（设置主题）</a></li><li><a href="#问题总结">问题总结</a></li><li><a href="#说明">说明</a></li></ul><!-- /TOC --><a id="more"></a><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>已下载并配置好<code>Git</code>环境的<code>Windows10</code>系统（可以参考我的另外一篇博客<code>git的安装与配置</code>），<br>当然后面的操作也适用于<code>Mac</code>系统，但需要注意<code>Win</code>和<code>Mac</code>终端命令行略有差别，不可照搬，如果在<code>Mac</code>上命令运行不了，则需要查找相应的<code>Mac</code>终端命令行。</p><hr><h2 id="第一步（安装note-js）"><a href="#第一步（安装note-js）" class="headerlink" title="第一步（安装note.js）"></a>第一步（安装note.js）</h2><p>下载<a href="https://nodejs.org/en/" target="_blank" rel="noopener">node.js</a>，如下图所示：<br><img src="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/node.png" alt="下载示意图"><br>下载下来以后，点击默认安装就可以了，如果不喜欢安装在C盘，可以自行更改安装目录。<br>安装好以后，在桌面任务栏点击搜索，输入cmd并选择以<code>管理员身份运行</code>，然后可进行如下操作：<br><img src="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/%E9%80%9A%E8%BF%87%E4%BB%A3%E7%A0%81%E6%9F%A5%E8%AF%A2node%E5%92%8Cnpm%E7%89%88%E6%9C%AC.png" alt="image"><br>如果可以通过代码查找到node和npm的版本，那说明node.js已经安装好了。</p><hr><h2 id="第二步（安装cnpm）"><a href="#第二步（安装cnpm）" class="headerlink" title="第二步（安装cnpm）"></a>第二步（安装cnpm）</h2><p>国内通过npm下载东西很慢，我们可以通过npm全局安装cnpm并指定淘宝源，以提升后续操作的速度，相应命令行如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure><p>然后通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm -v</span><br></pre></td></tr></table></figure><p>查找到安装的cnpm版本。</p><hr><h2 id="第三步（安装hexo并初始化博客）"><a href="#第三步（安装hexo并初始化博客）" class="headerlink" title="第三步（安装hexo并初始化博客）"></a>第三步（安装hexo并初始化博客）</h2><p>通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>全局安装hexo框架，再通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure><p>查询安装的hexo版本，然后在当前路径下，通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir 文件夹名称</span><br></pre></td></tr></table></figure><p>新建一个空文件夹（命名看个人，我将其命名为blog），后面这个文件夹会包含你博客的所有内容（如果不想在当前路径下工作，可以通过命令行<code>cd 路径</code>更改路径再新建文件夹），然后在blog的路径下通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>初始化一个博客，等命令行运行完之后，便可以看到在blog文件夹内新增了许多文件，这些是hexo生成的博客基础框架。<br>最后通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>生成初始博客界面，可以通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:<span class="number">4000</span></span><br></pre></td></tr></table></figure><p>访问该初始博客界面。</p><hr><h2 id="第四步（新建一篇博文并上传到github）"><a href="#第四步（新建一篇博文并上传到github）" class="headerlink" title="第四步（新建一篇博文并上传到github）"></a>第四步（新建一篇博文并上传到github）</h2><p>通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">"文件名"</span></span><br></pre></td></tr></table></figure><p>创建一个新的md文件（上述引号为英文输入法的引号，new和文件名之间有空格），该文件会保存在路径<code>blog\source\_posts</code>中，你可以通过下载<a href="https://notepad-plus-plus.org/downloads/" target="_blank" rel="noopener">Notepad++</a>或者<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VS Code</a>来编辑该md文件，需要注意的是博文一般都是以<a href="https://www.jianshu.com/p/b03a8d7b1719" target="_blank" rel="noopener">Markdown</a>格式编写。<br>例如，编辑test.md文件内容如下：<br><img src="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/test.png" alt="image"><br>（注意上面图片中<code>##</code>后面均有一个空格）保存以后在blog路径下按顺序运行命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>再打开本地链接<code>http://localhost:4000</code>，就可以看到：<br><img src="/2020/02/22/%E5%9F%BA%E4%BA%8Ehexo%E3%80%81github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/test%E7%BB%93%E6%9E%9C.png" alt="image"><br>看完之后记得<code>ctrl+c</code>打断<code>hexo server</code>。</p><p>点击<a href="https://github.com/" target="_blank" rel="noopener">github</a>注册并登录，然后创建一个名为<code>github用户名.github.io</code>的仓库（仓库名必须是这个格式），如果不会可以在网上查询教程， 这里就不再详述。<br>完成上面这一步之后，回到终端界面，在blog路径下通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo -deployer-git --save</span><br></pre></td></tr></table></figure><p>下载git部署插键，若安装过程中有warning提示不用管，等待安装完成即可。</p><p>接下来，我们找到blog文件夹里的<code>_config.yml</code>文件，右键选择<code>NotePad++</code>打开编辑，找到<code>deploy</code>设置（文件最下面），将其设置如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type: git</span><br><span class="line">repo: https://github.com/github用户名/github用户名.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure><p>（注意！注意！注意！冒号后面均有一个空格）然后保存并退出。然后在终端界面blog路径下通过：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>将blog配置文件上传到github的<code>github用户名.github.io</code>库中（第一次上传会提示输入github用户名和密码），然后就可以通过<code>https://github用户名.github.io/</code>访问博客界面啦！（有时github网站访问比较慢或出现404错误，需要多刷新几次）。</p><hr><h2 id="第五步（设置主题）"><a href="#第五步（设置主题）" class="headerlink" title="第五步（设置主题）"></a>第五步（设置主题）</h2><p><code>hexo</code>自带主题比较简单，你可以自己下载开源主题。这里给一个推荐：<code>https://github.com/litten/hexo-theme-yilia</code>。</p><p>在blog路径下，通过命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/litten/hexo-theme-yilia.git clone themes</span><br></pre></td></tr></table></figure><p>下载<code>yilia</code>主题到<code>blog\themes</code>路径下（有梯子的朋友可以打开梯子，这样会加快下载速度）。</p><p>然后再次找到blog文件夹里的<code>_config.yml</code>文件，右键选择<code>NotePad++</code>打开编辑，找到<code>theme</code>设置，将其改为：<code>theme: yilia</code>（同样的冒号后面有一个空格），保存退出。<br>最后在终端blog路径下，按顺序输入命令行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br><span class="line">ctrl + c(组合键,打断)</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>你就可以通过<code>https://github用户名.github.io/</code>访问新主题的博客界面啦！（若博客界面没有变化，多刷新等待一会儿）</p><hr><h2 id="问题总结"><a href="#问题总结" class="headerlink" title="问题总结"></a>问题总结</h2><p>1、如果上传的图片博客界面无法显示，参考<a href="https://www.jianshu.com/p/3db6a61d3782" target="_blank" rel="noopener">链接1</a>。<br>2、如果搭建 <code>hexo</code>，在执行<code>hexo deploy</code> 后,出现 <code>error deployer not found:git</code>的错误，参考<a href="https://blog.csdn.net/Qin605/article/details/71124757" target="_blank" rel="noopener">链接2</a>。</p><hr><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><blockquote><p>上述内容是我学习b站<a href="https://space.bilibili.com/384068749?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">CodeSheep</a>制作的<a href="https://www.bilibili.com/video/av44544186?t=402" target="_blank" rel="noopener">手把手教你从0开始搭建自己的个人博客 |无坑版视频教程| hexo</a>总结得出。<br>该up主讲解的非常详细，有兴趣的朋友可以去观看他的视频！</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
